(self.webpackChunksymfony=self.webpackChunksymfony||[]).push([[4108],{25437:function(t,e,r){"use strict";r(45243),r(52408),r(80687),r(88292)},17197:function(t,e,r){"use strict";var n=r(45243),o=r.n(n),a=r(25183),i=o().icon({iconUrl:a,iconSize:[22,22],iconAnchor:[11,11],popupAnchor:[0,-4],shadowSize:!1,shadowAnchor:!1});e.Z=i},90041:function(t,e,r){"use strict";r.d(e,{Z:function(){return u}});r(21249),r(25437);var n=r(70471),o=r(79075),a=r(19422),i=r(17197);function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"mapElement",void 0),l(this,"leafletMap",void 0),l(this,"mapCenterLatLng",void 0),l(this,"mapZoom",void 0),this.mapCenterLatLng=this.getDefaultMapCenterLatLng(),this.mapZoom=n.ZP[o.Z.MAP_DEFAULT_ZOOM]}var e,r,u;return e=t,(r=[{key:"createLeafletMap",value:function(t){return this.mapElement=t,this.leafletMap=L.map(this.mapElement,{tap:!1,zoomControl:!1,attributionControl:!1}),this.leafletMap.setView(this.mapCenterLatLng,this.mapZoom),L.control.zoom({zoomInTitle:a.Z.trans("trans.Zoom in"),zoomOutTitle:a.Z.trans("trans.Zoom out")}).addTo(this.leafletMap),L.control.locate({position:"topright",drawMarker:!1,drawCircle:!1,returnToPrevBounds:!0,locateOptions:{maxZoom:15},icon:"svg svg-location",iconLoading:"svg svg-spinner svg-pulse",strings:{title:a.Z.trans("trans.Show me where I am"),metersUnit:a.Z.trans("trans.meters"),feetUnit:a.Z.trans("trans.feet"),popup:a.Z.trans("trans.You are within {distance} {unit} from this point"),outsideMapBoundsMsg:a.Z.trans("trans.You seem located outside the boundaries of the map")},onLocationError:function(){alert(a.Z.trans("trans.Your web browser denied access to geolocation"))}}).addTo(this.leafletMap),this.leafletMap.addControl(new L.Control.Fullscreen({title:{false:a.Z.trans("trans.View Fullscreen"),true:a.Z.trans("trans.Exit Fullscreen")}})),L.control.attribution({prefix:!1}).addTo(this.leafletMap),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.leafletMap),this.leafletMap}},{key:"addMarker",value:function(t){var e=new L.marker(t,{icon:i.Z});return e.addTo(this.leafletMap),e}},{key:"getDefaultMapCenterLatLng",value:function(){if(!this.haveLocationCoordinates())return new L.LatLng(n.ZP[o.Z.MAP_DEFAULT_LATITUDE],n.ZP[o.Z.MAP_DEFAULT_LONGITUDE]);var t=n.ZP[o.Z.MAP_LOCATION_COORDINATES][o.Z.LATITUDE],e=n.ZP[o.Z.MAP_LOCATION_COORDINATES][o.Z.LONGITUDE];return new L.LatLng(t,e)}},{key:"haveLocationCoordinates",value:function(){return n.ZP[o.Z.MAP_LOCATION_COORDINATES]&&null!==n.ZP[o.Z.MAP_LOCATION_COORDINATES][o.Z.LONGITUDE]&&null!==n.ZP[o.Z.MAP_LOCATION_COORDINATES][o.Z.LATITUDE]}}])&&s(e.prototype,r),u&&s(e,u),t}()},54807:function(t,e,r){"use strict";r(66992),r(41539),r(78783),r(33948),r(60285),r(41637),r(39714),r(89554),r(54747),r(92222);var n,o,a=r(70471),i=r(79075),s=r(49117),l=r(90041),u=(r(25437),n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});!function(t){var e=function(){};t.Point=e;var r=function(){};t.ClusterObject=r;var n=1,o=Math.pow(2,53)-1,a=function(t){function e(e,r,o,a,i,s){void 0===o&&(o={}),void 0===i&&(i=1),void 0===s&&(s=!1);var l=t.call(this)||this;return l.data=o,l.position={lat:+e,lng:+r},l.weight=i,l.category=a,l.filtered=s,l.hashCode=n++,l}return u(e,t),e.prototype.Move=function(t,e){this.position.lat=+t,this.position.lng=+e},e.prototype.SetData=function(t){for(var e in t)this.data[e]=t[e]},e}(r);t.Marker=a;var i=function(t){function e(r){var n=t.call(this)||this;return n.stats=[0,0,0,0,0,0,0,0],n.data={},r?(e.ENABLE_MARKERS_LIST&&(n._clusterMarkers=[r]),n.lastMarker=r,n.hashCode=31+r.hashCode,n.population=1,void 0!==r.category&&(n.stats[r.category]=1),n.totalWeight=r.weight,n.position={lat:r.position.lat,lng:r.position.lng},n.averagePosition={lat:r.position.lat,lng:r.position.lng},n):(n.hashCode=1,e.ENABLE_MARKERS_LIST&&(n._clusterMarkers=[]),n)}return u(e,t),e.prototype.AddMarker=function(t){e.ENABLE_MARKERS_LIST&&this._clusterMarkers.push(t);var r=this.hashCode;r=(r<<5)-r+t.hashCode,this.hashCode=r>=o?r%o:r,this.lastMarker=t;var n=t.weight,a=this.totalWeight,i=n+a;this.averagePosition.lat=(this.averagePosition.lat*a+t.position.lat*n)/i,this.averagePosition.lng=(this.averagePosition.lng*a+t.position.lng*n)/i,++this.population,this.totalWeight=i,void 0!==t.category&&(this.stats[t.category]=this.stats[t.category]+1||1)},e.prototype.Reset=function(){this.hashCode=1,this.lastMarker=void 0,this.population=0,this.totalWeight=0,this.stats=[0,0,0,0,0,0,0,0],e.ENABLE_MARKERS_LIST&&(this._clusterMarkers=[])},e.prototype.ComputeBounds=function(t){var e=t.Project(this.position.lat,this.position.lng),r=t.Size,n=Math.floor(e.x/r)*r,o=Math.floor(e.y/r)*r,a=t.UnProject(n,o),i=t.UnProject(n+r,o+r);this.bounds={minLat:i.lat,maxLat:a.lat,minLng:a.lng,maxLng:i.lng}},e.prototype.GetClusterMarkers=function(){return this._clusterMarkers},e.prototype.ApplyCluster=function(t){this.hashCode=41*this.hashCode+43*t.hashCode,this.hashCode>o&&(this.hashCode=this.hashCode=o);var r=t.totalWeight,n=this.totalWeight,a=r+n;for(var i in this.averagePosition.lat=(this.averagePosition.lat*n+t.averagePosition.lat*r)/a,this.averagePosition.lng=(this.averagePosition.lng*n+t.averagePosition.lng*r)/a,this.population+=t.population,this.totalWeight=a,this.bounds.minLat=Math.min(this.bounds.minLat,t.bounds.minLat),this.bounds.minLng=Math.min(this.bounds.minLng,t.bounds.minLng),this.bounds.maxLat=Math.max(this.bounds.maxLat,t.bounds.maxLat),this.bounds.maxLng=Math.max(this.bounds.maxLng,t.bounds.maxLng),t.stats)t.stats.hasOwnProperty(i)&&(this.stats.hasOwnProperty(i)?this.stats[i]+=t.stats[i]:this.stats[i]=t.stats[i]);e.ENABLE_MARKERS_LIST&&(this._clusterMarkers=this._clusterMarkers.concat(t.GetClusterMarkers()))},e.ENABLE_MARKERS_LIST=!1,e}(r);function s(t){for(var e,r,n,o=1,a=t.length;o<a;++o){for(n=(r=t[o]).position.lng,e=o-1;e>=0&&t[e].position.lng>n;--e)t[e+1]=t[e];t[e+1]=r}}t.Cluster=i;var l=function(){function t(){this._markers=[],this._nbChanges=0,this._clusters=[],this.Size=166,this.ViewPadding=.2}return t.prototype.RegisterMarker=function(t){t._removeFlag&&delete t._removeFlag,this._markers.push(t),this._nbChanges+=1},t.prototype.RegisterMarkers=function(t){var e=this;t.forEach((function(t){e.RegisterMarker(t)}))},t.prototype._sortMarkers=function(){var t,e,r=this._markers,n=r.length;this._nbChanges&&(t=n,(e=this._nbChanges)>300||!(e/t<.2))?this._markers.sort((function(t,e){return t.position.lng-e.position.lng})):s(r),this._nbChanges=0},t.prototype._sortClusters=function(){s(this._clusters)},t.prototype._indexLowerBoundLng=function(t){for(var e,r,n=this._markers,o=0,a=n.length;a>0;)n[e=o+(r=Math.floor(a/2))].position.lng<t?(o=++e,a-=r+1):a=r;return o},t.prototype._resetClusterViews=function(){for(var t=0,e=this._clusters.length;t<e;++t){var r=this._clusters[t];r.Reset(),r.ComputeBounds(this)}},t.prototype.ProcessView=function(t){var e=Math.abs(t.maxLat-t.minLat)*this.ViewPadding,r=Math.abs(t.maxLng-t.minLng)*this.ViewPadding,n={minLat:t.minLat-e-e,maxLat:t.maxLat+e+e,minLng:t.minLng-r-r,maxLng:t.maxLng+r+r};this._sortMarkers(),this._resetClusterViews();for(var o,a,s=this._indexLowerBoundLng(n.minLng),l=this._markers,u=this._clusters,h=u.slice(0),c=s,p=l.length;c<p;++c){var f=l[c],g=f.position;if(g.lng>n.maxLng)break;if(g.lat>n.minLat&&g.lat<n.maxLat&&!f.filtered){for(var m,d=!1,L=0,M=h.length;L<M;++L)if((m=h[L]).bounds.maxLng<f.position.lng)h.splice(L,1),--L,--M;else if(o=g,a=m.bounds,o.lat>=a.minLat&&o.lat<=a.maxLat&&o.lng>=a.minLng&&o.lng<=a.maxLng){m.AddMarker(f),d=!0;break}d||((m=new i(f)).ComputeBounds(this),u.push(m),h.push(m))}}var _=[];for(c=0,p=u.length;c<p;++c)(m=u[c]).population>0&&_.push(m);return this._clusters=_,this._sortClusters(),this._clusters},t.prototype.RemoveMarkers=function(t){if(t){for(var e=0,r=t.length;e<r;++e)t[e]._removeFlag=!0;var n=[];for(e=0,r=this._markers.length;e<r;++e)this._markers[e]._removeFlag?delete this._markers[e]._removeFlag:n.push(this._markers[e]);this._markers=n}else this._markers=[]},t.prototype.FindMarkersInArea=function(t){for(var e=t.minLat,r=t.maxLat,n=t.minLng,o=t.maxLng,a=this._markers,i=[],s=this._indexLowerBoundLng(n),l=a.length;s<l;++s){var u=a[s].position;if(u.lng>o)break;u.lat>=e&&u.lat<=r&&u.lng>=n&&i.push(a[s])}return i},t.prototype.ComputeBounds=function(t,e){if(void 0===e&&(e=!0),!t||!t.length)return null;for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE,i=0,s=t.length;i<s;++i)if(e||!t[i].filtered){var l=t[i].position;l.lat<r&&(r=l.lat),l.lat>n&&(n=l.lat),l.lng<o&&(o=l.lng),l.lng>a&&(a=l.lng)}return{minLat:r,maxLat:n,minLng:o,maxLng:a}},t.prototype.FindMarkersBoundsInArea=function(t){return this.ComputeBounds(this.FindMarkersInArea(t))},t.prototype.ComputeGlobalBounds=function(t){return void 0===t&&(t=!0),this.ComputeBounds(this._markers,t)},t.prototype.GetMarkers=function(){return this._markers},t.prototype.GetPopulation=function(){return this._markers.length},t.prototype.ResetClusters=function(){this._clusters=[]},t}();t.PruneCluster=l}(o||(o={})),o||(o={});var h=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,e){var r=this;void 0===t&&(t=120),void 0===e&&(e=20),this.Cluster=new o.PruneCluster,this.Cluster.Size=t,this.clusterMargin=Math.min(e,t/4),this.Cluster.Project=function(t,e){return r._map.project(new L.LatLng(t,e),Math.floor(r._map.getZoom()))},this.Cluster.UnProject=function(t,e){return r._map.unproject(new L.Point(t,e),Math.floor(r._map.getZoom()))},this._objectsOnMap=[],this.spiderfier=new c(this),this._hardMove=!1,this._resetIcons=!1,this._removeTimeoutId=0,this._markersRemoveListTimeout=[]},RegisterMarker:function(t){this.Cluster.RegisterMarker(t)},RegisterMarkers:function(t){this.Cluster.RegisterMarkers(t)},RemoveMarkers:function(t){this.Cluster.RemoveMarkers(t)},BuildLeafletCluster:function(t,e){var r=this,n=new L.Marker(e,{icon:this.BuildLeafletClusterIcon(t)});return n._leafletClusterBounds=t.bounds,n.on("click",(function(){var t=n._leafletClusterBounds,e=r.Cluster.FindMarkersInArea(t),o=r.Cluster.ComputeBounds(e);if(o){var a=new L.LatLngBounds(new L.LatLng(o.minLat,o.maxLng),new L.LatLng(o.maxLat,o.minLng)),i=r._map.getZoom(),s=r._map.getBoundsZoom(a,!1,new L.Point(20,20));if(s===i){for(var l=[],u=0,h=r._objectsOnMap.length;u<h;++u){var c=r._objectsOnMap[u];c.data._leafletMarker!==n&&c.bounds.minLat>=t.minLat&&c.bounds.maxLat<=t.maxLat&&c.bounds.minLng>=t.minLng&&c.bounds.maxLng<=t.maxLng&&l.push(c.bounds)}if(l.length>0){var p=[],f=l.length;for(u=0,h=e.length;u<h;++u){for(var g=e[u].position,m=!1,d=0;d<f;++d){var M=l[d];if(g.lat>=M.minLat&&g.lat<=M.maxLat&&g.lng>=M.minLng&&g.lng<=M.maxLng){m=!0;break}}m||p.push(e[u])}e=p}e.length<200||s>=r._map.getMaxZoom()?r._map.fire("overlappingmarkers",{cluster:r,markers:e,center:n.getLatLng(),marker:n}):s++,r._map.setView(n.getLatLng(),s)}else r._map.fitBounds(a)}})),n},BuildLeafletClusterIcon:function(t){var e="prunecluster prunecluster-",r=38,n=this.Cluster.GetPopulation();return t.population<Math.max(10,.01*n)?e+="small":t.population<Math.max(100,.05*n)?(e+="medium",r=40):(e+="large",r=44),new L.DivIcon({html:"<div><span>"+t.population+"</span></div>",className:e,iconSize:L.point(r,r)})},BuildLeafletMarker:function(t,e){var r=new L.Marker(e);return this.PrepareLeafletMarker(r,t.data,t.category),r},PrepareLeafletMarker:function(t,e,r){if(e.icon&&("function"==typeof e.icon?t.setIcon(e.icon(e,r)):t.setIcon(e.icon)),e.popup){var n="function"==typeof e.popup?e.popup(e,r):e.popup;t.getPopup()?t.setPopupContent(n,e.popupOptions):t.bindPopup(n,e.popupOptions)}},onAdd:function(t){this._map=t,t.on("movestart",this._moveStart,this),t.on("moveend",this._moveEnd,this),t.on("zoomend",this._zoomStart,this),t.on("zoomend",this._zoomEnd,this),this.ProcessView(),t.addLayer(this.spiderfier)},onRemove:function(t){t.off("movestart",this._moveStart,this),t.off("moveend",this._moveEnd,this),t.off("zoomend",this._zoomStart,this),t.off("zoomend",this._zoomEnd,this);for(var e=0,r=this._objectsOnMap.length;e<r;++e)t.removeLayer(this._objectsOnMap[e].data._leafletMarker);this._objectsOnMap=[],this.Cluster.ResetClusters(),t.removeLayer(this.spiderfier),this._map=null},_moveStart:function(){this._moveInProgress=!0},_moveEnd:function(t){this._moveInProgress=!1,this._hardMove=t.hard,this.ProcessView()},_zoomStart:function(){this._zoomInProgress=!0},_zoomEnd:function(){this._zoomInProgress=!1,this.ProcessView()},ProcessView:function(){var t=this;if(this._map&&!this._zoomInProgress&&!this._moveInProgress){for(var e=this._map,r=e.getBounds(),n=Math.floor(e.getZoom()),o=this.clusterMargin/this.Cluster.Size,a=this._resetIcons,i=r.getSouthWest(),s=r.getNorthEast(),l=this.Cluster.ProcessView({minLat:i.lat,minLng:i.lng,maxLat:s.lat,maxLng:s.lng}),u=this._objectsOnMap,h=[],c=new Array(u.length),p=0,f=u.length;p<f;++p){var g=u[p].data._leafletMarker;c[p]=g,g._removeFromMap=!0}var m=[],d=[],M=[],_=[];for(p=0,f=l.length;p<f;++p){for(var v=l[p],y=v.data,C=(v.bounds.maxLat-v.bounds.minLat)*o,k=(v.bounds.maxLng-v.bounds.minLng)*o,N=0,w=_.length;N<w;++N){var I=_[N];if(I.bounds.maxLng<v.bounds.minLng)_.splice(N,1),--N,--w;else{var T=I.averagePosition.lng+k,P=I.averagePosition.lat-C,O=I.averagePosition.lat+C,A=v.averagePosition.lng-k,j=v.averagePosition.lat-C,x=v.averagePosition.lat+C;if(T>A&&O>j&&P<x){y._leafletCollision=!0,I.ApplyCluster(v);break}}}y._leafletCollision||_.push(v)}for(l.forEach((function(e){var r=void 0,o=e.data;if(o._leafletCollision)return o._leafletCollision=!1,o._leafletOldPopulation=0,void(o._leafletOldHashCode=0);var i=new L.LatLng(e.averagePosition.lat,e.averagePosition.lng),s=o._leafletMarker;if(s)if(1===e.population&&1===o._leafletOldPopulation&&e.hashCode===s._hashCode)(a||s._zoomLevel!==n||e.lastMarker.data.forceIconRedraw)&&(t.PrepareLeafletMarker(s,e.lastMarker.data,e.lastMarker.category),e.lastMarker.data.forceIconRedraw&&(e.lastMarker.data.forceIconRedraw=!1)),s.setLatLng(i),r=s;else if(e.population>1&&o._leafletOldPopulation>1&&(s._zoomLevel===n||o._leafletPosition.equals(i))){if(s.setLatLng(i),a||e.population!=o._leafletOldPopulation||e.hashCode!==o._leafletOldHashCode){var l={};L.Util.extend(l,e.bounds),s._leafletClusterBounds=l,s.setIcon(t.BuildLeafletClusterIcon(e))}o._leafletOldPopulation=e.population,o._leafletOldHashCode=e.hashCode,r=s}r?(r._removeFromMap=!1,h.push(e),r._zoomLevel=n,r._hashCode=e.hashCode,r._population=e.population,o._leafletMarker=r,o._leafletPosition=i):(1===e.population?d.push(e):m.push(e),o._leafletPosition=i,o._leafletOldPopulation=e.population,o._leafletOldHashCode=e.hashCode)})),m=d.concat(m),p=0,f=u.length;p<f;++p){var z=(v=u[p]).data;if(g=z._leafletMarker,z._leafletMarker._removeFromMap){var D=!0;if(g._zoomLevel===n){var b=v.averagePosition;for(C=(v.bounds.maxLat-v.bounds.minLat)*o,k=(v.bounds.maxLng-v.bounds.minLng)*o,N=0,w=m.length;N<w;++N){var E=m[N],S=E.data;if(1===g._population&&1===E.population&&g._hashCode===E.hashCode)(a||E.lastMarker.data.forceIconRedraw)&&(this.PrepareLeafletMarker(g,E.lastMarker.data,E.lastMarker.category),E.lastMarker.data.forceIconRedraw&&(E.lastMarker.data.forceIconRedraw=!1)),g.setLatLng(S._leafletPosition),D=!1;else{var Z=E.averagePosition,U=b.lng-k,R=Z.lng+k;if(T=b.lng+k,P=b.lat-C,O=b.lat+C,A=Z.lng-k,j=Z.lat-C,x=Z.lat+C,g._population>1&&E.population>1&&T>A&&U<R&&O>j&&P<x){g.setLatLng(S._leafletPosition),g.setIcon(this.BuildLeafletClusterIcon(E));var Y={};L.Util.extend(Y,E.bounds),g._leafletClusterBounds=Y,S._leafletOldPopulation=E.population,S._leafletOldHashCode=E.hashCode,g._population=E.population,D=!1}}if(!D){S._leafletMarker=g,g._removeFromMap=!1,h.push(E),m.splice(N,1),--N,--w;break}}}D&&(g._removeFromMap||console.error("wtf"))}}for(p=0,f=m.length;p<f;++p){var B,F=(z=(v=m[p]).data)._leafletPosition;(B=1===v.population?this.BuildLeafletMarker(v.lastMarker,F):this.BuildLeafletCluster(v,F)).addTo(e),B.setOpacity(0),M.push(B),z._leafletMarker=B,B._zoomLevel=n,B._hashCode=v.hashCode,B._population=v.population,h.push(v)}if(window.setTimeout((function(){for(p=0,f=M.length;p<f;++p){var t=M[p];t._icon&&L.DomUtil.addClass(t._icon,"prunecluster-anim"),t._shadow&&L.DomUtil.addClass(t._shadow,"prunecluster-anim"),t.setOpacity(1)}}),1),this._hardMove)for(p=0,f=c.length;p<f;++p)(g=c[p])._removeFromMap&&e.removeLayer(g);else{if(0!==this._removeTimeoutId)for(window.clearTimeout(this._removeTimeoutId),p=0,f=this._markersRemoveListTimeout.length;p<f;++p)e.removeLayer(this._markersRemoveListTimeout[p]);var G=[];for(p=0,f=c.length;p<f;++p)(g=c[p])._removeFromMap&&(g.setOpacity(0),G.push(g));G.length>0&&(this._removeTimeoutId=window.setTimeout((function(){for(p=0,f=G.length;p<f;++p)e.removeLayer(G[p]);t._removeTimeoutId=0}),300)),this._markersRemoveListTimeout=G}this._objectsOnMap=h,this._hardMove=!1,this._resetIcons=!1}},FitBounds:function(t){void 0===t&&(t=!0);var e=this.Cluster.ComputeGlobalBounds(t);e&&this._map.fitBounds(new L.LatLngBounds(new L.LatLng(e.minLat,e.maxLng),new L.LatLng(e.maxLat,e.minLng)))},GetMarkers:function(){return this.Cluster.GetMarkers()},RedrawIcons:function(t){void 0===t&&(t=!0),this._resetIcons=!0,t&&this.ProcessView()}}),c=(L.Layer?L.Layer:L.Class).extend({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_spiralCountTrigger:8,spiderfyDistanceMultiplier:1,initialize:function(t){this._cluster=t,this._currentMarkers=[],this._multiLines=!!L.multiPolyline,this._lines=this._multiLines?L.multiPolyline([],{weight:1.5,color:"#222"}):L.polyline([],{weight:1.5,color:"#222"})},onAdd:function(t){this._map=t,this._map.on("overlappingmarkers",this.Spiderfy,this),this._map.on("click",this.Unspiderfy,this),this._map.on("zoomend",this.Unspiderfy,this)},Spiderfy:function(t){var e=this;if(t.cluster===this._cluster){this.Unspiderfy();var r=t.markers.filter((function(t){return!t.filtered}));this._currentCenter=t.center;var n,o=this._map.latLngToLayerPoint(t.center);r.length>=this._spiralCountTrigger?n=this._generatePointsSpiral(r.length,o):(this._multiLines&&(o.y+=10),n=this._generatePointsCircle(r.length,o));for(var a=[],i=[],s=[],l=0,u=n.length;l<u;++l){var h=this._map.layerPointToLatLng(n[l]),c=this._cluster.BuildLeafletMarker(r[l],t.center);c.setZIndexOffset(5e3),c.setOpacity(0),this._currentMarkers.push(c),this._map.addLayer(c),i.push(c),s.push(h)}window.setTimeout((function(){for(l=0,u=n.length;l<u;++l)i[l].setLatLng(s[l]).setOpacity(1);var r=+new Date,o=window.setInterval((function(){a=[];var i=+new Date-r;if(i>=290)window.clearInterval(o),h=1;else var h=i/290;var c=t.center;for(l=0,u=n.length;l<u;++l){var p=s[l],f=p.lat-c.lat,g=p.lng-c.lng;a.push([c,new L.LatLng(c.lat+f*h,c.lng+g*h)])}e._lines.setLatLngs(a)}),42)}),1),this._lines.setLatLngs(a),this._map.addLayer(this._lines),t.marker&&(this._clusterMarker=t.marker.setOpacity(.3))}},_generatePointsCircle:function(t,e){var r,n,o=this.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,a=this._2PI/t,i=[];for(i.length=t,r=t-1;r>=0;r--)n=this._circleStartAngle+r*a,i[r]=new L.Point(Math.round(e.x+o*Math.cos(n)),Math.round(e.y+o*Math.sin(n)));return i},_generatePointsSpiral:function(t,e){var r,n=this.spiderfyDistanceMultiplier*this._spiralLengthStart,o=this.spiderfyDistanceMultiplier*this._spiralFootSeparation,a=this.spiderfyDistanceMultiplier*this._spiralLengthFactor,i=0,s=[];for(s.length=t,r=t-1;r>=0;r--)i+=o/n+5e-4*r,s[r]=new L.Point(Math.round(e.x+n*Math.cos(i)),Math.round(e.y+n*Math.sin(i))),n+=this._2PI*a/i;return s},Unspiderfy:function(){for(var t=this,e=0,r=this._currentMarkers.length;e<r;++e)this._currentMarkers[e].setLatLng(this._currentCenter).setOpacity(0);var n=this._currentMarkers;window.setTimeout((function(){for(e=0,r=n.length;e<r;++e)t._map.removeLayer(n[e])}),300),this._currentMarkers=[],this._map.removeLayer(this._lines),this._clusterMarker&&this._clusterMarker.setOpacity(1)},onRemove:function(t){this.Unspiderfy(),t.off("overlappingmarkers",this.Spiderfy,this),t.off("click",this.Unspiderfy,this),t.off("zoomend",this.Unspiderfy,this)}}),p=r(17197),f=new l.Z,g=document.querySelector(".js__mapWithListings");if(g){var m=f.createLeafletMap(g);m.on("moveend",(function(){var t=new URL(window.location),e=m.getCenter().lat,r=m.getCenter().lng,n=m.getZoom();t.searchParams.set(i.Z.LATITUDE,e),t.searchParams.set(i.Z.LONGITUDE,r),t.searchParams.set(i.Z.ZOOM,n),window.history.pushState(null,null,t.toString()),document.querySelectorAll(".js__linkToMap").forEach((function(t){var o=new URL(t.getAttribute("href"),window.location);o.searchParams.set(i.Z.LATITUDE,e),o.searchParams.set(i.Z.LONGITUDE,r),o.searchParams.set(i.Z.ZOOM,n),t.setAttribute("href",o.toString())})),document.querySelector(".js__filterLatitude").value=e,document.querySelector(".js__filterLongitude").value=r,document.querySelector(".js__filterZoom").value=n}));var d=new h;d.PrepareLeafletMarker=function(t,e){t.setIcon(p.Z);var r=e.listingOnMap,n=s.Z.generate("app_listing_show",{id:r.listingId,slug:r.listingSlug}),o=s.Z.generate("app_public_dir")+r.mainImage,a="";r.mainImage&&(a='<img src="'.concat(o,'" class="map-popup-image float-left mr-2" alt="" />'));var i="\n            <a href='".concat(n,'\' class="map-popup-wrapper">\n                ').concat(a,"\n                ").concat(r.listingTitle,"\n            </a>\n        ");t.getPopup()?t.setPopupContent(i):t.bindPopup(i,{autoPan:!1})},a.ZP[i.Z.LISTING_LIST].forEach((function(t){var e=new o.Marker(t.latitude,t.longitude);e.data.listingOnMap=t,d.RegisterMarker(e)})),m.addLayer(d)}},25787:function(t,e,r){var n=r(17854),o=r(47976),a=n.TypeError;t.exports=function(t,e){if(o(e,t))return t;throw a("Incorrect invocation")}},18533:function(t,e,r){"use strict";var n=r(42092).forEach,o=r(9341)("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},9341:function(t,e,r){"use strict";var n=r(47293);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},71246:function(t,e,r){var n=r(70648),o=r(58173),a=r(97497),i=r(5112)("iterator");t.exports=function(t){if(null!=t)return o(t,i)||o(t,"@@iterator")||a[n(t)]}},18554:function(t,e,r){var n=r(17854),o=r(46916),a=r(19662),i=r(19670),s=r(66330),l=r(71246),u=n.TypeError;t.exports=function(t,e){var r=arguments.length<2?l(t):e;if(a(r))return i(o(r,t));throw u(s(t)+" is not iterable")}},97659:function(t,e,r){var n=r(5112),o=r(97497),a=n("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||i[a]===t)}},99212:function(t,e,r){var n=r(46916),o=r(19670),a=r(58173);t.exports=function(t,e,r){var i,s;o(t);try{if(!(i=a(t,"return"))){if("throw"===e)throw r;return r}i=n(i,t)}catch(t){s=!0,i=t}if("throw"===e)throw r;if(s)throw i;return o(i),r}},12248:function(t,e,r){var n=r(31320);t.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},92222:function(t,e,r){"use strict";var n=r(82109),o=r(17854),a=r(47293),i=r(43157),s=r(70111),l=r(47908),u=r(26244),h=r(86135),c=r(65417),p=r(81194),f=r(5112),g=r(7392),m=f("isConcatSpreadable"),d=9007199254740991,L="Maximum allowed index exceeded",M=o.TypeError,_=g>=51||!a((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),v=p("concat"),y=function(t){if(!s(t))return!1;var e=t[m];return void 0!==e?!!e:i(t)};n({target:"Array",proto:!0,forced:!_||!v},{concat:function(t){var e,r,n,o,a,i=l(this),s=c(i,0),p=0;for(e=-1,n=arguments.length;e<n;e++)if(y(a=-1===e?i:arguments[e])){if(p+(o=u(a))>d)throw M(L);for(r=0;r<o;r++,p++)r in a&&h(s,p,a[r])}else{if(p>=d)throw M(L);h(s,p++,a)}return s.length=p,s}})},89554:function(t,e,r){"use strict";var n=r(82109),o=r(18533);n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},54747:function(t,e,r){var n=r(17854),o=r(48324),a=r(98509),i=r(18533),s=r(68880),l=function(t){if(t&&t.forEach!==i)try{s(t,"forEach",i)}catch(e){t.forEach=i}};for(var u in o)o[u]&&l(n[u]&&n[u].prototype);l(a)},25183:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMnB0IiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjUxMnB0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0yNTYgMGMtMTQxLjE2NDA2MiAwLTI1NiAxMTQuODM1OTM4LTI1NiAyNTZzMTE0LjgzNTkzOCAyNTYgMjU2IDI1NiAyNTYtMTE0LjgzNTkzOCAyNTYtMjU2LTExNC44MzU5MzgtMjU2LTI1Ni0yNTZ6bTAgMCIgZmlsbD0iI2Y0NDMzNiIvPjxwYXRoIGQ9Im0zNDEuMzMyMDMxIDI1NmMwIDQ3LjEyODkwNi0zOC4yMDMxMjUgODUuMzMyMDMxLTg1LjMzMjAzMSA4NS4zMzIwMzFzLTg1LjMzMjAzMS0zOC4yMDMxMjUtODUuMzMyMDMxLTg1LjMzMjAzMSAzOC4yMDMxMjUtODUuMzMyMDMxIDg1LjMzMjAzMS04NS4zMzIwMzEgODUuMzMyMDMxIDM4LjIwMzEyNSA4NS4zMzIwMzEgODUuMzMyMDMxem0wIDAiIGZpbGw9IiNmYWZhZmEiLz48cGF0aCBkPSJtMjU2IDUxMmMtMTQxLjE2NDA2MiAwLTI1Ni0xMTQuODM1OTM4LTI1Ni0yNTZzMTE0LjgzNTkzOC0yNTYgMjU2LTI1NiAyNTYgMTE0LjgzNTkzOCAyNTYgMjU2LTExNC44MzU5MzggMjU2LTI1NiAyNTZ6bTAtNDgwYy0xMjMuNTE5NTMxIDAtMjI0IDEwMC40ODA0NjktMjI0IDIyNHMxMDAuNDgwNDY5IDIyNCAyMjQgMjI0IDIyNC0xMDAuNDgwNDY5IDIyNC0yMjQtMTAwLjQ4MDQ2OS0yMjQtMjI0LTIyNHptMCAwIi8+PHBhdGggZD0ibTI1NiAzNjIuNjY3OTY5Yy01OC44MTY0MDYgMC0xMDYuNjY3OTY5LTQ3Ljg1MTU2My0xMDYuNjY3OTY5LTEwNi42Njc5NjlzNDcuODUxNTYzLTEwNi42Njc5NjkgMTA2LjY2Nzk2OS0xMDYuNjY3OTY5IDEwNi42Njc5NjkgNDcuODUxNTYzIDEwNi42Njc5NjkgMTA2LjY2Nzk2OS00Ny44NTE1NjMgMTA2LjY2Nzk2OS0xMDYuNjY3OTY5IDEwNi42Njc5Njl6bTAtMTgxLjMzNTkzOGMtNDEuMTcxODc1IDAtNzQuNjY3OTY5IDMzLjQ5NjA5NC03NC42Njc5NjkgNzQuNjY3OTY5czMzLjQ5NjA5NCA3NC42Njc5NjkgNzQuNjY3OTY5IDc0LjY2Nzk2OSA3NC42Njc5NjktMzMuNDk2MDk0IDc0LjY2Nzk2OS03NC42Njc5NjktMzMuNDk2MDk0LTc0LjY2Nzk2OS03NC42Njc5NjktNzQuNjY3OTY5em0wIDAiLz48L3N2Zz4="}},function(t){t.O(0,[2719,9825,5027,628,9335,285,9422,9117],(function(){return e=54807,t(t.s=e);var e}));t.O()}]);
//# sourceMappingURL=listing_list_map.86c8cd26.js.map