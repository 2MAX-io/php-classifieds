<link rel="stylesheet" href="{{ asset('asset/lib/fileuploader/font/font-fileuploader.css') }}">
<link rel="stylesheet" href="{{ asset('asset/lib/fileuploader/jquery.fileuploader.min.css') }}">
<script src="{{ asset('asset/lib/fileuploader/jquery.fileuploader.min.js') }}"></script>

<script type="text/javascript">
    $('#listing_file').fileuploader({
        addMore: true,
        fileMaxSize: 1.95,
        extensions: ['jpg', 'jpeg', 'png', 'gif'],
        thumbnails: {
            onItemShow: function(item) {
                // add sorter button to the item html
                item.html.find('.fileuploader-action-remove').before('<a class="fileuploader-action fileuploader-action-sort" title="Sort"><i></i></a>');
            }
        },
        sorter: {
            selectorExclude: null,
            placeholder: null,
            scrollContainer: window,
            onSort: function(list, listEl, parentEl, newInputEl, inputEl) {}
        },
        onRemove: function(item, listEl, parentEl, newInputEl, inputEl) {
            if ('listingFileId' in item.data) {
                $.post('{{ path('app_listing_file_remove') }}', {
                    listingFileId: item.data.listingFileId
                });
            }

            return true;
        },
        files: {{ listingFilesForJavascript | default([]) | json_encode | raw }},
        captions: {
            button: function(options) { return '{{ 'trans.Browse' | trans }} ' + (options.limit == 1 ? '{{ 'trans.file' | trans }}' : '{{ 'trans.files' | trans }}'); },
            feedback: function(options) { return '{{ 'trans.Chose' | trans }} ' + (options.limit == 1 ? '{{ 'trans.file' | trans }}' : '{{ 'trans.files' | trans }}') + ' {{ 'trans.to upload' | trans }}'; },
            feedback2: function(options) { return options.length + ' ' + (options.length > 1 ? ' files were' : ' file was') + ' chosen'; },
            confirm: 'Confirm',
            cancel: 'Cancel',
            name: 'Name',
            type: 'Type',
            size: 'Size',
            dimensions: 'Dimensions',
            duration: 'Duration',
            crop: 'Crop',
            rotate: 'Rotate',
            sort: 'Sort',
            download: 'Download',
            remove: 'Remove',
            drop: 'Drop the files here to Upload',
            paste: '<div class="fileuploader-pending-loader"></div> Pasting a file, click here to cancel.',
            removeConfirmation: 'Are you sure you want to remove this file?',
            errors: {
                filesLimit: 'Only ${limit} files are allowed to be uploaded.',
                filesType: 'Only ${extensions} files are allowed to be uploaded.',
                fileSize: '${name} is too large! Please choose a file up to ${fileMaxSize}MB.',
                filesSizeAll: 'Files that you chose are too large! Please upload files up to ${maxSize} MB.',
                fileName: 'File with the name ${name} is already selected.',
                folderUpload: 'You are not allowed to upload folders.'
            }
        }
    });
</script>
