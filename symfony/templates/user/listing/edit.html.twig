{% extends 'base.html.twig' %}

{% block title %}{{ 'trans.Edit listing' | trans }}{% endblock %}

{% block body %}
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-4 col-lg-3 mb-5">
                {% include 'user/listing/user_navigation_card.html.twig' %}
            </div>

            <div class="col-md-8 col-lg-9">
                <div>
                    <a href="{{ path('app_listing_show', {'id': listing.id, 'slug': listing.slug}) }}" target="_blank" class="float-left">
                        {{ 'trans.Preview listing' | trans }}
                    </a>

                    <div class="text-right">
                        <a href="{{ path('app_user_listing_index') }}">{{ 'trans.back to list' | trans }}</a>

                        <span class="{{ getListingStatusClass(listing) }}">{{ getListingStatus(listing) }}</span>

                        {% if listing.adminActivated %}
                            <a href="{{ path('app_user_feature_listing', {"id": listing.id}) }}" class="btn btn-dark">{{ 'trans.Feature this listing' | trans }}</a>
                        {% endif %}

                        {% if listing.adminActivated %}
                            <a href="{{ path('app_user_validity_extend', {'id': listing.id}) }}" class="btn btn-outline-success">{{ 'trans.Extend' | trans }}</a>
                        {% endif %}

                        {% if listing.userDeactivated %}
                            {{ include('user/listing/_activate_form.html.twig') }}
                        {% else %}
                            {{ include('user/listing/_deactivate_form.html.twig') }}
                        {% endif %}

                        {{ include('user/listing/_delete_form.html.twig') }}
                    </div>
                </div>

                {{ include('user/listing/_form.html.twig', {'button_label': 'trans.Update' | trans}) }}
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    {% include 'user/listing/_custom_fields.html.twig' %}
    {% include 'user/listing/_file_upload.html.twig' %}
    {% include 'user/listing/_category_select.html.twig' %}

    <script type="text/javascript">
        var cleave = new Cleave('.input-phone', {
            phone: true,
            phoneRegionCode: 'pl' // todo: from settings
        });
    </script>

{% endblock %}
