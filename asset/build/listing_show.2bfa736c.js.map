{"version":3,"sources":["webpack://symfony/./assets/function/copyTextToClipboard.js","webpack://symfony/./assets/module/leaflet/leaflet_marker_icon.js","webpack://symfony/./assets/module/leaflet/map.js","webpack://symfony/./assets/module/listing_observe.js","webpack://symfony/./assets/public/listing_show.js"],"names":["copyTextToClipboard","text","textArea","document","createElement","style","position","top","left","width","height","padding","border","outline","boxShadow","background","value","body","appendChild","select","execCommand","err","console","log","removeChild","onClickCopyToClipboard","$","on","this","data","markerIcon","L","iconUrl","mapMarkerIcon","iconSize","iconAnchor","popupAnchor","shadowSize","shadowAnchor","Map","mapCenterLatLng","getDefaultMapCenterLatLng","mapZoom","dataForJs","ParamEnum","mapElement","leafletMap","map","tap","zoomControl","attributionControl","setView","control","zoom","zoomInTitle","Translator","zoomOutTitle","addTo","locate","drawMarker","drawCircle","returnToPrevBounds","locateOptions","maxZoom","icon","iconLoading","strings","title","metersUnit","feetUnit","popup","outsideMapBoundsMsg","onLocationError","alert","addControl","Control","Fullscreen","false","true","attribution","prefix","tileLayer","latLng","marker","haveLocationCoordinates","LatLng","latitude","longitude","$button","listingId","attr","newObservedValue","formData","FormData","append","fetch","Routing","method","headers","then","response","json","jsonData","$icon","is","find","removeClass","addClass","fancybox","buttons","hash","querySelector","addEventListener","display","createLeafletMap","addMarker","closest","classList","remove"],"mappings":"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","file":"listing_show.2bfa736c.js","sourcesContent":["\"use strict\";\n\nimport $ from \"jquery\";\n\nlet copyTextToClipboard = function (text) {\n    let textArea = document.createElement(\"textarea\");\n\n    //\n    // *** This styling is an extra step which is likely not required. ***\n    //\n    // Why is it here? To ensure:\n    // 1. the element is able to have focus and selection.\n    // 2. if element was to flash render it has minimal visual impact.\n    // 3. less flakiness with selection and copying which **might** occur if\n    //    the textarea element is not visible.\n    //\n    // The likelihood is the element won't even render, not even a flash,\n    // so some of these are just precautions. However in IE the element\n    // is visible whilst the popup box asking the user for permission for\n    // the web page to copy to the clipboard.\n    //\n\n    // Place in top-left corner of screen regardless of scroll position.\n    textArea.style.position = \"fixed\";\n    textArea.style.top = \"0\";\n    textArea.style.left = \"0\";\n\n    // Ensure it has a small width and height. Setting to 1px / 1em\n    // doesn't work as this gives a negative w/h on some browsers.\n    textArea.style.width = \"2em\";\n    textArea.style.height = \"2em\";\n\n    // We don't need padding, reducing the size if it does flash render.\n    textArea.style.padding = \"0\";\n\n    // Clean up any borders.\n    textArea.style.border = \"none\";\n    textArea.style.outline = \"none\";\n    textArea.style.boxShadow = \"none\";\n\n    // Avoid flash of white box if rendered for any reason.\n    textArea.style.background = \"transparent\";\n\n    textArea.value = text;\n\n    document.body.appendChild(textArea);\n\n    textArea.select();\n\n    try {\n        document.execCommand(\"copy\");\n    } catch (err) {\n        console.log(\"unable to copy to clipboard\");\n    }\n\n    document.body.removeChild(textArea);\n};\n\nlet onClickCopyToClipboard = function () {\n    $(document).on(\"click\", \".js__copyToClipboard\", function () {\n        copyTextToClipboard($(this).data(\"clipboard-value\"));\n    });\n};\n\nexport { copyTextToClipboard, onClickCopyToClipboard };\n","\"use strict\";\n\nimport L from \"leaflet\";\nimport mapMarkerIcon from \"~/img/map/map-marker-icon.svg\";\n\nlet markerIcon = L.icon({\n    iconUrl: mapMarkerIcon,\n    iconSize: [22, 22],\n    iconAnchor: [11, 11],\n    popupAnchor: [0, -4],\n    shadowSize: false,\n    shadowAnchor: false,\n});\n\nexport default markerIcon;\n","\"use strict\";\n\nimport \"~/module/leaflet/leaflet\";\nimport dataForJs from \"~/function/dataForJs\";\nimport ParamEnum from \"~/enum/ParamEnum\";\nimport Translator from \"~/module/Translator\";\nimport markerIcon from \"~/module/leaflet/leaflet_marker_icon\";\n\nexport default class Map {\n    mapElement;\n    leafletMap;\n    mapCenterLatLng;\n    mapZoom;\n\n    constructor() {\n        this.mapCenterLatLng = this.getDefaultMapCenterLatLng();\n        this.mapZoom = dataForJs[ParamEnum.MAP_DEFAULT_ZOOM];\n    }\n\n    createLeafletMap(mapElement) {\n        this.mapElement = mapElement;\n        this.leafletMap = L.map(this.mapElement, {\n            tap: false, // ref https://github.com/Leaflet/Leaflet/issues/7255\n            zoomControl: false,\n            attributionControl: false,\n        });\n        this.leafletMap.setView(this.mapCenterLatLng, this.mapZoom);\n\n        L.control\n            .zoom({\n                zoomInTitle: Translator.trans(\"trans.Zoom in\"),\n                zoomOutTitle: Translator.trans(\"trans.Zoom out\"),\n            })\n            .addTo(this.leafletMap);\n\n        // noinspection JSUnusedGlobalSymbols\n        L.control\n            .locate({\n                position: \"topright\",\n                drawMarker: false,\n                drawCircle: false,\n                returnToPrevBounds: true,\n                locateOptions: {\n                    maxZoom: 15,\n                },\n                icon: \"svg svg-location\",\n                iconLoading: \"svg svg-spinner svg-pulse\",\n                strings: {\n                    title: Translator.trans(\"trans.Show me where I am\"),\n                    metersUnit: Translator.trans(\"trans.meters\"),\n                    feetUnit: Translator.trans(\"trans.feet\"),\n                    popup: Translator.trans(\"trans.You are within {distance} {unit} from this point\"),\n                    outsideMapBoundsMsg: Translator.trans(\"trans.You seem located outside the boundaries of the map\"),\n                },\n                onLocationError: () => {\n                    alert(Translator.trans(\"trans.Your web browser denied access to geolocation\"));\n                },\n            })\n            .addTo(this.leafletMap);\n\n        this.leafletMap.addControl(\n            new L.Control.Fullscreen({\n                title: {\n                    false: Translator.trans(\"trans.View Fullscreen\"),\n                    true: Translator.trans(\"trans.Exit Fullscreen\"),\n                },\n            })\n        );\n\n        L.control.attribution({ prefix: false }).addTo(this.leafletMap);\n\n        L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        }).addTo(this.leafletMap);\n\n        // L.tileLayer(Routing.generate(\"app_map_image_cache_template\") + \"/{x}_{y}_{z}.png\", {\n        //     attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        // }).addTo(this.leafletMap);\n\n        return this.leafletMap;\n    }\n\n    addMarker(latLng) {\n        let marker = new L.marker(latLng, { icon: markerIcon });\n        marker.addTo(this.leafletMap);\n\n        return marker;\n    }\n\n    getDefaultMapCenterLatLng() {\n        if (!this.haveLocationCoordinates()) {\n            return new L.LatLng(dataForJs[ParamEnum.MAP_DEFAULT_LATITUDE], dataForJs[ParamEnum.MAP_DEFAULT_LONGITUDE]);\n        }\n\n        let latitude = dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LATITUDE];\n        let longitude = dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LONGITUDE];\n\n        return new L.LatLng(latitude, longitude);\n    }\n\n    haveLocationCoordinates() {\n        return (\n            dataForJs[ParamEnum.MAP_LOCATION_COORDINATES] &&\n            dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LONGITUDE] !== null &&\n            dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LATITUDE] !== null\n        );\n    }\n}\n","\"use strict\";\n\nimport $ from \"jquery\";\nimport ParamEnum from \"~/enum/ParamEnum\";\nimport dataForJs from \"~/function/dataForJs\";\nimport Routing from \"~/module/Routing\";\n\n$(\".js__observe\").on(\"click\", function () {\n    let $button = $(this);\n    let listingId = $button.attr(\"data-listing-id\");\n    let currentObservedValue = $button.attr(\"data-observed\") | 0;\n    let newObservedValue = !currentObservedValue;\n\n    var formData = new FormData();\n    formData.append(ParamEnum.LISTING_ID, listingId);\n    formData.append(ParamEnum.OBSERVED, newObservedValue);\n    fetch(Routing.generate(\"app_user_observed_listing_set\"), {\n        method: \"post\",\n        body: formData,\n        headers: {\n            \"X-CSRF-Token\": dataForJs[ParamEnum.CSRF_TOKEN],\n        },\n    })\n        .then((response) => response.json())\n        .then((jsonData) => {\n            if (true !== jsonData[ParamEnum.SUCCESS]) {\n                return;\n            }\n\n            $button.attr(\"data-observed\", jsonData[ParamEnum.OBSERVED] | 0);\n            let $icon = $button;\n            if (!$icon.is(\".svg\")) {\n                $icon = $icon.find(\".svg\");\n            }\n\n            if (jsonData[ParamEnum.OBSERVED]) {\n                $icon.removeClass(\"svg-heart-outline\").addClass(\"svg-heart\");\n            } else {\n                $icon.removeClass(\"svg-heart\").addClass(\"svg-heart-outline\");\n            }\n        });\n});\n","\"use strict\";\n\nimport $ from \"jquery\";\nimport ParamEnum from \"~/enum/ParamEnum\";\nimport dataForJs from \"~/function/dataForJs\";\nimport { onClickCopyToClipboard } from \"~/function/copyTextToClipboard\";\n\nimport \"@fancyapps/fancybox/dist/jquery.fancybox\";\nimport \"@fancyapps/fancybox/dist/jquery.fancybox.css\";\nimport Map from \"~/module/leaflet/map\";\nimport \"~/module/listing_observe\";\n\nonClickCopyToClipboard();\n\n$('[data-fancybox=\"file\"]').fancybox({\n    buttons: [\"zoom\", \"thumbs\", \"close\"],\n    hash: false,\n});\n\ndocument.querySelector(\".js__showListingOnMap\")?.addEventListener(\"click\", function () {\n    let $button = this;\n    document.querySelector(\".js__listingOnMap\").style.display = \"block\";\n    document.querySelector(\".js__mapButtonWrapper\").style.display = \"none\";\n\n    let map = new Map();\n    map.mapCenterLatLng = new L.LatLng(\n        dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LATITUDE],\n        dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LONGITUDE]\n    );\n    map.mapZoom = 12;\n    map.createLeafletMap(document.querySelector(\".js__listingOnMap\"));\n    map.addMarker(map.mapCenterLatLng);\n\n    $button.closest(\".card.d-print-none\").classList.remove(\"d-print-none\");\n});\n"],"sourceRoot":""}