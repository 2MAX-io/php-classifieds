<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="{{ _charset }}" />
    <title>An Error Occurred: {{ status_text }}</title>
    <style>
        body { background-color: #fff; color: #222; font: 16px/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 0; }
        .container { margin: 30px; max-width: 600px; }
        h1 { color: #dc3545; font-size: 24px; }
        h2 { font-size: 18px; }
    </style>
</head>
<body>
<div class="container">
    {% if userVisibleExceptionMessage %}
        <h1>
            An Error Occurred: {{ userVisibleExceptionMessage }}
        </h1>
    {% else %}
        <h1>Oops! An Error Occurred</h1>
    {% endif %}

    <h2>The server returned a "{{ status_code }} {{ status_text }}".</h2>

    <p>
        Something is broken. Please let us know what you were doing when this error occurred.
        We will fix it as soon as possible. Sorry for any inconvenience caused.
    </p>

    <p>
        When contacting us please share information bellow, copy entire content, or take photo of this page, thank you
    </p>

    <p>
        <button onclick="copyTextToClipboard('{{ exceptionTrace }}')">Copy to clipboard</button>
    </p>

    <textarea id="exceptionTrace" style="width: 100%; min-height: 10em; overflow-wrap: break-word;">
        {{- exceptionTrace -}}
    </textarea>

    <script>
        function copyTextToClipboard(text) {
            let textArea = document.createElement("textarea");

            // Place in top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = '0';
            textArea.style.left = '0';

            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';

            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = '0';

            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';

            // Avoid flash of white box if rendered for any reason.
            textArea.style.background = 'transparent';


            textArea.value = text;

            document.body.appendChild(textArea);

            textArea.select();

            try {
                document.execCommand('copy');
            } catch (err) {
                console.log('unable to copy to clipboard');
            }

            document.body.removeChild(textArea);
        }

    </script>
</div>
</body>
</html>
