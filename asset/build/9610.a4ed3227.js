(self.webpackChunksymfony=self.webpackChunksymfony||[]).push([[9610],{10647:function(t,e,r){var n=r(47908),i=Math.floor,a="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,l,u,h){var p=r+t.length,c=l.length,f=s;return void 0!==u&&(u=n(u),f=o),a.call(h,f,(function(n,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(p);case"<":o=u[a.slice(1,-1)];break;default:var s=+a;if(0===s)return n;if(s>c){var h=i(s/10);return 0===h?n:h<=c?void 0===l[h-1]?a.charAt(1):l[h-1]+a.charAt(1):n}o=l[s-1]}return void 0===o?"":o}))}},83009:function(t,e,r){var n=r(17854),i=r(53111).trim,a=r(81361),o=n.parseInt,s=/^[+-]?0[Xx]/,l=8!==o(a+"08")||22!==o(a+"0x16");t.exports=l?function(t,e){var r=i(String(t));return o(r,e>>>0||(s.test(r)?16:10))}:o},36707:function(t,e,r){var n=r(19670),i=r(13099),a=r(5112)("species");t.exports=function(t,e){var r,o=n(t).constructor;return void 0===o||null==(r=n(o)[a])?e:i(r)}},53111:function(t,e,r){var n=r(84488),i="["+r(81361)+"]",a=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),s=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(a,"")),2&t&&(r=r.replace(o,"")),r}};t.exports={start:s(1),end:s(2),trim:s(3)}},81361:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},92222:function(t,e,r){"use strict";var n=r(82109),i=r(47293),a=r(43157),o=r(70111),s=r(47908),l=r(17466),u=r(86135),h=r(65417),p=r(81194),c=r(5112),f=r(7392),g=c("isConcatSpreadable"),d=9007199254740991,m="Maximum allowed index exceeded",_=f>=51||!i((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),v=p("concat"),L=function(t){if(!o(t))return!1;var e=t[g];return void 0!==e?!!e:a(t)};n({target:"Array",proto:!0,forced:!_||!v},{concat:function(t){var e,r,n,i,a,o=s(this),p=h(o,0),c=0;for(e=-1,n=arguments.length;e<n;e++)if(L(a=-1===e?o:arguments[e])){if(c+(i=l(a.length))>d)throw TypeError(m);for(r=0;r<i;r++,c++)r in a&&u(p,c,a[r])}else{if(c>=d)throw TypeError(m);u(p,c++,a)}return p.length=c,p}})},9653:function(t,e,r){"use strict";var n=r(19781),i=r(17854),a=r(54705),o=r(31320),s=r(86656),l=r(84326),u=r(79587),h=r(57593),p=r(47293),c=r(70030),f=r(8006).f,g=r(31236).f,d=r(3070).f,m=r(53111).trim,_="Number",v=i.Number,L=v.prototype,M=l(c(L))==_,k=function(t){var e,r,n,i,a,o,s,l,u=h(t,!1);if("string"==typeof u&&u.length>2)if(43===(e=(u=m(u)).charCodeAt(0))||45===e){if(88===(r=u.charCodeAt(2))||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+u}for(o=(a=u.slice(2)).length,s=0;s<o;s++)if((l=a.charCodeAt(s))<48||l>i)return NaN;return parseInt(a,n)}return+u};if(a(_,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var C,y=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof y&&(M?p((function(){L.valueOf.call(r)})):l(r)!=_)?u(new v(k(e)),r,y):k(e)},P=n?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;P.length>x;x++)s(v,C=P[x])&&!s(y,C)&&d(y,C,g(v,C));y.prototype=L,L.constructor=y,o(i,_,y)}},91058:function(t,e,r){var n=r(82109),i=r(83009);n({global:!0,forced:parseInt!=i},{parseInt:i})},4723:function(t,e,r){"use strict";var n=r(27007),i=r(19670),a=r(17466),o=r(84488),s=r(31530),l=r(97651);n("match",1,(function(t,e,r){return[function(e){var r=o(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,r):new RegExp(e)[t](String(r))},function(t){var n=r(e,t,this);if(n.done)return n.value;var o=i(t),u=String(this);if(!o.global)return l(o,u);var h=o.unicode;o.lastIndex=0;for(var p,c=[],f=0;null!==(p=l(o,u));){var g=String(p[0]);c[f]=g,""===g&&(o.lastIndex=s(u,a(o.lastIndex),h)),f++}return 0===f?null:c}]}))},15306:function(t,e,r){"use strict";var n=r(27007),i=r(19670),a=r(17466),o=r(99958),s=r(84488),l=r(31530),u=r(10647),h=r(97651),p=Math.max,c=Math.min;n("replace",2,(function(t,e,r,n){var f=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=n.REPLACE_KEEPS_$0,d=f?"$":"$0";return[function(r,n){var i=s(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,i,n):e.call(String(i),r,n)},function(t,n){if(!f&&g||"string"==typeof n&&-1===n.indexOf(d)){var s=r(e,t,this,n);if(s.done)return s.value}var m=i(t),_=String(this),v="function"==typeof n;v||(n=String(n));var L=m.global;if(L){var M=m.unicode;m.lastIndex=0}for(var k=[];;){var C=h(m,_);if(null===C)break;if(k.push(C),!L)break;""===String(C[0])&&(m.lastIndex=l(_,a(m.lastIndex),M))}for(var y,P="",x=0,I=0;I<k.length;I++){C=k[I];for(var w=String(C[0]),b=p(c(o(C.index),_.length),0),S=[],E=1;E<C.length;E++)S.push(void 0===(y=C[E])?y:String(y));var A=C.groups;if(v){var R=[w].concat(S,b,_);void 0!==A&&R.push(A);var O=String(n.apply(void 0,R))}else O=u(w,_,b,S,A,n);b>=x&&(P+=_.slice(x,b)+O,x=b+w.length)}return P+_.slice(x)}]}))},23123:function(t,e,r){"use strict";var n=r(27007),i=r(47850),a=r(19670),o=r(84488),s=r(36707),l=r(31530),u=r(17466),h=r(97651),p=r(22261),c=r(47293),f=[].push,g=Math.min,d=4294967295,m=!c((function(){return!RegExp(d,"y")}));n("split",2,(function(t,e,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=String(o(this)),a=void 0===r?d:r>>>0;if(0===a)return[];if(void 0===t)return[n];if(!i(t))return e.call(n,t,a);for(var s,l,u,h=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,m=new RegExp(t.source,c+"g");(s=p.call(m,n))&&!((l=m.lastIndex)>g&&(h.push(n.slice(g,s.index)),s.length>1&&s.index<n.length&&f.apply(h,s.slice(1)),u=s[0].length,g=l,h.length>=a));)m.lastIndex===s.index&&m.lastIndex++;return g===n.length?!u&&m.test("")||h.push(""):h.push(n.slice(g)),h.length>a?h.slice(0,a):h}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var i=o(this),a=null==e?void 0:e[t];return void 0!==a?a.call(e,i,r):n.call(String(i),e,r)},function(t,i){var o=r(n,t,this,i,n!==e);if(o.done)return o.value;var p=a(t),c=String(this),f=s(p,RegExp),_=p.unicode,v=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(m?"y":"g"),L=new f(m?p:"^(?:"+p.source+")",v),M=void 0===i?d:i>>>0;if(0===M)return[];if(0===c.length)return null===h(L,c)?[c]:[];for(var k=0,C=0,y=[];C<c.length;){L.lastIndex=m?C:0;var P,x=h(L,m?c:c.slice(C));if(null===x||(P=g(u(L.lastIndex+(m?0:C)),c.length))===k)C=l(c,C,_);else{if(y.push(c.slice(k,C)),y.length===M)return y;for(var I=1;I<=x.length-1;I++)if(y.push(x[I]),y.length===M)return y;C=k=P}}return y.push(c.slice(k)),y}]}),!m)},33138:function(t,e,r){"use strict";r.d(e,{K:function(){return i},w:function(){return o}});var n,i,a=(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});!function(t){var e=function(){};t.Point=e;var r=function(){};t.ClusterObject=r;var n=1,i=Math.pow(2,53)-1,o=function(t){function e(e,r,i,a,o,s){void 0===i&&(i={}),void 0===o&&(o=1),void 0===s&&(s=!1);var l=t.call(this)||this;return l.data=i,l.position={lat:+e,lng:+r},l.weight=o,l.category=a,l.filtered=s,l.hashCode=n++,l}return a(e,t),e.prototype.Move=function(t,e){this.position.lat=+t,this.position.lng=+e},e.prototype.SetData=function(t){for(var e in t)this.data[e]=t[e]},e}(r);t.Marker=o;var s=function(t){function e(r){var n=t.call(this)||this;return n.stats=[0,0,0,0,0,0,0,0],n.data={},r?(e.ENABLE_MARKERS_LIST&&(n._clusterMarkers=[r]),n.lastMarker=r,n.hashCode=31+r.hashCode,n.population=1,void 0!==r.category&&(n.stats[r.category]=1),n.totalWeight=r.weight,n.position={lat:r.position.lat,lng:r.position.lng},n.averagePosition={lat:r.position.lat,lng:r.position.lng},n):(n.hashCode=1,e.ENABLE_MARKERS_LIST&&(n._clusterMarkers=[]),n)}return a(e,t),e.prototype.AddMarker=function(t){e.ENABLE_MARKERS_LIST&&this._clusterMarkers.push(t);var r=this.hashCode;r=(r<<5)-r+t.hashCode,this.hashCode=r>=i?r%i:r,this.lastMarker=t;var n=t.weight,a=this.totalWeight,o=n+a;this.averagePosition.lat=(this.averagePosition.lat*a+t.position.lat*n)/o,this.averagePosition.lng=(this.averagePosition.lng*a+t.position.lng*n)/o,++this.population,this.totalWeight=o,void 0!==t.category&&(this.stats[t.category]=this.stats[t.category]+1||1)},e.prototype.Reset=function(){this.hashCode=1,this.lastMarker=void 0,this.population=0,this.totalWeight=0,this.stats=[0,0,0,0,0,0,0,0],e.ENABLE_MARKERS_LIST&&(this._clusterMarkers=[])},e.prototype.ComputeBounds=function(t){var e=t.Project(this.position.lat,this.position.lng),r=t.Size,n=Math.floor(e.x/r)*r,i=Math.floor(e.y/r)*r,a=t.UnProject(n,i),o=t.UnProject(n+r,i+r);this.bounds={minLat:o.lat,maxLat:a.lat,minLng:a.lng,maxLng:o.lng}},e.prototype.GetClusterMarkers=function(){return this._clusterMarkers},e.prototype.ApplyCluster=function(t){this.hashCode=41*this.hashCode+43*t.hashCode,this.hashCode>i&&(this.hashCode=this.hashCode=i);var r=t.totalWeight,n=this.totalWeight,a=r+n;for(var o in this.averagePosition.lat=(this.averagePosition.lat*n+t.averagePosition.lat*r)/a,this.averagePosition.lng=(this.averagePosition.lng*n+t.averagePosition.lng*r)/a,this.population+=t.population,this.totalWeight=a,this.bounds.minLat=Math.min(this.bounds.minLat,t.bounds.minLat),this.bounds.minLng=Math.min(this.bounds.minLng,t.bounds.minLng),this.bounds.maxLat=Math.max(this.bounds.maxLat,t.bounds.maxLat),this.bounds.maxLng=Math.max(this.bounds.maxLng,t.bounds.maxLng),t.stats)t.stats.hasOwnProperty(o)&&(this.stats.hasOwnProperty(o)?this.stats[o]+=t.stats[o]:this.stats[o]=t.stats[o]);e.ENABLE_MARKERS_LIST&&(this._clusterMarkers=this._clusterMarkers.concat(t.GetClusterMarkers()))},e.ENABLE_MARKERS_LIST=!1,e}(r);function l(t){for(var e,r,n,i=1,a=t.length;i<a;++i){for(n=(r=t[i]).position.lng,e=i-1;e>=0&&t[e].position.lng>n;--e)t[e+1]=t[e];t[e+1]=r}}t.Cluster=s;var u=function(){function t(){this._markers=[],this._nbChanges=0,this._clusters=[],this.Size=166,this.ViewPadding=.2}return t.prototype.RegisterMarker=function(t){t._removeFlag&&delete t._removeFlag,this._markers.push(t),this._nbChanges+=1},t.prototype.RegisterMarkers=function(t){var e=this;t.forEach((function(t){e.RegisterMarker(t)}))},t.prototype._sortMarkers=function(){var t,e,r=this._markers,n=r.length;this._nbChanges&&(t=n,(e=this._nbChanges)>300||!(e/t<.2))?this._markers.sort((function(t,e){return t.position.lng-e.position.lng})):l(r),this._nbChanges=0},t.prototype._sortClusters=function(){l(this._clusters)},t.prototype._indexLowerBoundLng=function(t){for(var e,r,n=this._markers,i=0,a=n.length;a>0;)n[e=i+(r=Math.floor(a/2))].position.lng<t?(i=++e,a-=r+1):a=r;return i},t.prototype._resetClusterViews=function(){for(var t=0,e=this._clusters.length;t<e;++t){var r=this._clusters[t];r.Reset(),r.ComputeBounds(this)}},t.prototype.ProcessView=function(t){var e=Math.abs(t.maxLat-t.minLat)*this.ViewPadding,r=Math.abs(t.maxLng-t.minLng)*this.ViewPadding,n={minLat:t.minLat-e-e,maxLat:t.maxLat+e+e,minLng:t.minLng-r-r,maxLng:t.maxLng+r+r};this._sortMarkers(),this._resetClusterViews();for(var i,a,o=this._indexLowerBoundLng(n.minLng),l=this._markers,u=this._clusters,h=u.slice(0),p=o,c=l.length;p<c;++p){var f=l[p],g=f.position;if(g.lng>n.maxLng)break;if(g.lat>n.minLat&&g.lat<n.maxLat&&!f.filtered){for(var d,m=!1,_=0,v=h.length;_<v;++_)if((d=h[_]).bounds.maxLng<f.position.lng)h.splice(_,1),--_,--v;else if(i=g,a=d.bounds,i.lat>=a.minLat&&i.lat<=a.maxLat&&i.lng>=a.minLng&&i.lng<=a.maxLng){d.AddMarker(f),m=!0;break}m||((d=new s(f)).ComputeBounds(this),u.push(d),h.push(d))}}var L=[];for(p=0,c=u.length;p<c;++p)(d=u[p]).population>0&&L.push(d);return this._clusters=L,this._sortClusters(),this._clusters},t.prototype.RemoveMarkers=function(t){if(t){for(var e=0,r=t.length;e<r;++e)t[e]._removeFlag=!0;var n=[];for(e=0,r=this._markers.length;e<r;++e)this._markers[e]._removeFlag?delete this._markers[e]._removeFlag:n.push(this._markers[e]);this._markers=n}else this._markers=[]},t.prototype.FindMarkersInArea=function(t){for(var e=t.minLat,r=t.maxLat,n=t.minLng,i=t.maxLng,a=this._markers,o=[],s=this._indexLowerBoundLng(n),l=a.length;s<l;++s){var u=a[s].position;if(u.lng>i)break;u.lat>=e&&u.lat<=r&&u.lng>=n&&o.push(a[s])}return o},t.prototype.ComputeBounds=function(t,e){if(void 0===e&&(e=!0),!t||!t.length)return null;for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,i=Number.MAX_VALUE,a=-Number.MAX_VALUE,o=0,s=t.length;o<s;++o)if(e||!t[o].filtered){var l=t[o].position;l.lat<r&&(r=l.lat),l.lat>n&&(n=l.lat),l.lng<i&&(i=l.lng),l.lng>a&&(a=l.lng)}return{minLat:r,maxLat:n,minLng:i,maxLng:a}},t.prototype.FindMarkersBoundsInArea=function(t){return this.ComputeBounds(this.FindMarkersInArea(t))},t.prototype.ComputeGlobalBounds=function(t){return void 0===t&&(t=!0),this.ComputeBounds(this._markers,t)},t.prototype.GetMarkers=function(){return this._markers},t.prototype.GetPopulation=function(){return this._markers.length},t.prototype.ResetClusters=function(){this._clusters=[]},t}();t.PruneCluster=u}(i||(i={})),i||(i={});var o=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,e){var r=this;void 0===t&&(t=120),void 0===e&&(e=20),this.Cluster=new i.PruneCluster,this.Cluster.Size=t,this.clusterMargin=Math.min(e,t/4),this.Cluster.Project=function(t,e){return r._map.project(new L.LatLng(t,e),Math.floor(r._map.getZoom()))},this.Cluster.UnProject=function(t,e){return r._map.unproject(new L.Point(t,e),Math.floor(r._map.getZoom()))},this._objectsOnMap=[],this.spiderfier=new s(this),this._hardMove=!1,this._resetIcons=!1,this._removeTimeoutId=0,this._markersRemoveListTimeout=[]},RegisterMarker:function(t){this.Cluster.RegisterMarker(t)},RegisterMarkers:function(t){this.Cluster.RegisterMarkers(t)},RemoveMarkers:function(t){this.Cluster.RemoveMarkers(t)},BuildLeafletCluster:function(t,e){var r=this,n=new L.Marker(e,{icon:this.BuildLeafletClusterIcon(t)});return n._leafletClusterBounds=t.bounds,n.on("click",(function(){var t=n._leafletClusterBounds,e=r.Cluster.FindMarkersInArea(t),i=r.Cluster.ComputeBounds(e);if(i){var a=new L.LatLngBounds(new L.LatLng(i.minLat,i.maxLng),new L.LatLng(i.maxLat,i.minLng)),o=r._map.getZoom(),s=r._map.getBoundsZoom(a,!1,new L.Point(20,20));if(s===o){for(var l=[],u=0,h=r._objectsOnMap.length;u<h;++u){var p=r._objectsOnMap[u];p.data._leafletMarker!==n&&p.bounds.minLat>=t.minLat&&p.bounds.maxLat<=t.maxLat&&p.bounds.minLng>=t.minLng&&p.bounds.maxLng<=t.maxLng&&l.push(p.bounds)}if(l.length>0){var c=[],f=l.length;for(u=0,h=e.length;u<h;++u){for(var g=e[u].position,d=!1,m=0;m<f;++m){var _=l[m];if(g.lat>=_.minLat&&g.lat<=_.maxLat&&g.lng>=_.minLng&&g.lng<=_.maxLng){d=!0;break}}d||c.push(e[u])}e=c}e.length<200||s>=r._map.getMaxZoom()?r._map.fire("overlappingmarkers",{cluster:r,markers:e,center:n.getLatLng(),marker:n}):s++,r._map.setView(n.getLatLng(),s)}else r._map.fitBounds(a)}})),n},BuildLeafletClusterIcon:function(t){var e="prunecluster prunecluster-",r=38,n=this.Cluster.GetPopulation();return t.population<Math.max(10,.01*n)?e+="small":t.population<Math.max(100,.05*n)?(e+="medium",r=40):(e+="large",r=44),new L.DivIcon({html:"<div><span>"+t.population+"</span></div>",className:e,iconSize:L.point(r,r)})},BuildLeafletMarker:function(t,e){var r=new L.Marker(e);return this.PrepareLeafletMarker(r,t.data,t.category),r},PrepareLeafletMarker:function(t,e,r){if(e.icon&&("function"==typeof e.icon?t.setIcon(e.icon(e,r)):t.setIcon(e.icon)),e.popup){var n="function"==typeof e.popup?e.popup(e,r):e.popup;t.getPopup()?t.setPopupContent(n,e.popupOptions):t.bindPopup(n,e.popupOptions)}},onAdd:function(t){this._map=t,t.on("movestart",this._moveStart,this),t.on("moveend",this._moveEnd,this),t.on("zoomend",this._zoomStart,this),t.on("zoomend",this._zoomEnd,this),this.ProcessView(),t.addLayer(this.spiderfier)},onRemove:function(t){t.off("movestart",this._moveStart,this),t.off("moveend",this._moveEnd,this),t.off("zoomend",this._zoomStart,this),t.off("zoomend",this._zoomEnd,this);for(var e=0,r=this._objectsOnMap.length;e<r;++e)t.removeLayer(this._objectsOnMap[e].data._leafletMarker);this._objectsOnMap=[],this.Cluster.ResetClusters(),t.removeLayer(this.spiderfier),this._map=null},_moveStart:function(){this._moveInProgress=!0},_moveEnd:function(t){this._moveInProgress=!1,this._hardMove=t.hard,this.ProcessView()},_zoomStart:function(){this._zoomInProgress=!0},_zoomEnd:function(){this._zoomInProgress=!1,this.ProcessView()},ProcessView:function(){var t=this;if(this._map&&!this._zoomInProgress&&!this._moveInProgress){for(var e=this._map,r=e.getBounds(),n=Math.floor(e.getZoom()),i=this.clusterMargin/this.Cluster.Size,a=this._resetIcons,o=r.getSouthWest(),s=r.getNorthEast(),l=this.Cluster.ProcessView({minLat:o.lat,minLng:o.lng,maxLat:s.lat,maxLng:s.lng}),u=this._objectsOnMap,h=[],p=new Array(u.length),c=0,f=u.length;c<f;++c){var g=u[c].data._leafletMarker;p[c]=g,g._removeFromMap=!0}var d=[],m=[],_=[],v=[];for(c=0,f=l.length;c<f;++c){for(var M=l[c],k=M.data,C=(M.bounds.maxLat-M.bounds.minLat)*i,y=(M.bounds.maxLng-M.bounds.minLng)*i,P=0,x=v.length;P<x;++P){var I=v[P];if(I.bounds.maxLng<M.bounds.minLng)v.splice(P,1),--P,--x;else{var w=I.averagePosition.lng+y,b=I.averagePosition.lat-C,S=I.averagePosition.lat+C,E=M.averagePosition.lng-y,A=M.averagePosition.lat-C,R=M.averagePosition.lat+C;if(w>E&&S>A&&b<R){k._leafletCollision=!0,I.ApplyCluster(M);break}}}k._leafletCollision||v.push(M)}for(l.forEach((function(e){var r=void 0,i=e.data;if(i._leafletCollision)return i._leafletCollision=!1,i._leafletOldPopulation=0,void(i._leafletOldHashCode=0);var o=new L.LatLng(e.averagePosition.lat,e.averagePosition.lng),s=i._leafletMarker;if(s)if(1===e.population&&1===i._leafletOldPopulation&&e.hashCode===s._hashCode)(a||s._zoomLevel!==n||e.lastMarker.data.forceIconRedraw)&&(t.PrepareLeafletMarker(s,e.lastMarker.data,e.lastMarker.category),e.lastMarker.data.forceIconRedraw&&(e.lastMarker.data.forceIconRedraw=!1)),s.setLatLng(o),r=s;else if(e.population>1&&i._leafletOldPopulation>1&&(s._zoomLevel===n||i._leafletPosition.equals(o))){if(s.setLatLng(o),a||e.population!=i._leafletOldPopulation||e.hashCode!==i._leafletOldHashCode){var l={};L.Util.extend(l,e.bounds),s._leafletClusterBounds=l,s.setIcon(t.BuildLeafletClusterIcon(e))}i._leafletOldPopulation=e.population,i._leafletOldHashCode=e.hashCode,r=s}r?(r._removeFromMap=!1,h.push(e),r._zoomLevel=n,r._hashCode=e.hashCode,r._population=e.population,i._leafletMarker=r,i._leafletPosition=o):(1===e.population?m.push(e):d.push(e),i._leafletPosition=o,i._leafletOldPopulation=e.population,i._leafletOldHashCode=e.hashCode)})),d=m.concat(d),c=0,f=u.length;c<f;++c){var O=(M=u[c]).data;if(g=O._leafletMarker,O._leafletMarker._removeFromMap){var B=!0;if(g._zoomLevel===n){var T=M.averagePosition;for(C=(M.bounds.maxLat-M.bounds.minLat)*i,y=(M.bounds.maxLng-M.bounds.minLng)*i,P=0,x=d.length;P<x;++P){var N=d[P],F=N.data;if(1===g._population&&1===N.population&&g._hashCode===N.hashCode)(a||N.lastMarker.data.forceIconRedraw)&&(this.PrepareLeafletMarker(g,N.lastMarker.data,N.lastMarker.category),N.lastMarker.data.forceIconRedraw&&(N.lastMarker.data.forceIconRedraw=!1)),g.setLatLng(F._leafletPosition),B=!1;else{var z=N.averagePosition,U=T.lng-y,V=z.lng+y;if(w=T.lng+y,b=T.lat-C,S=T.lat+C,E=z.lng-y,A=z.lat-C,R=z.lat+C,g._population>1&&N.population>1&&w>E&&U<V&&S>A&&b<R){g.setLatLng(F._leafletPosition),g.setIcon(this.BuildLeafletClusterIcon(N));var j={};L.Util.extend(j,N.bounds),g._leafletClusterBounds=j,F._leafletOldPopulation=N.population,F._leafletOldHashCode=N.hashCode,g._population=N.population,B=!1}}if(!B){F._leafletMarker=g,g._removeFromMap=!1,h.push(N),d.splice(P,1),--P,--x;break}}}B&&(g._removeFromMap||console.error("wtf"))}}for(c=0,f=d.length;c<f;++c){var D,G=(O=(M=d[c]).data)._leafletPosition;(D=1===M.population?this.BuildLeafletMarker(M.lastMarker,G):this.BuildLeafletCluster(M,G)).addTo(e),D.setOpacity(0),_.push(D),O._leafletMarker=D,D._zoomLevel=n,D._hashCode=M.hashCode,D._population=M.population,h.push(M)}if(window.setTimeout((function(){for(c=0,f=_.length;c<f;++c){var t=_[c];t._icon&&L.DomUtil.addClass(t._icon,"prunecluster-anim"),t._shadow&&L.DomUtil.addClass(t._shadow,"prunecluster-anim"),t.setOpacity(1)}}),1),this._hardMove)for(c=0,f=p.length;c<f;++c)(g=p[c])._removeFromMap&&e.removeLayer(g);else{if(0!==this._removeTimeoutId)for(window.clearTimeout(this._removeTimeoutId),c=0,f=this._markersRemoveListTimeout.length;c<f;++c)e.removeLayer(this._markersRemoveListTimeout[c]);var $=[];for(c=0,f=p.length;c<f;++c)(g=p[c])._removeFromMap&&(g.setOpacity(0),$.push(g));$.length>0&&(this._removeTimeoutId=window.setTimeout((function(){for(c=0,f=$.length;c<f;++c)e.removeLayer($[c]);t._removeTimeoutId=0}),300)),this._markersRemoveListTimeout=$}this._objectsOnMap=h,this._hardMove=!1,this._resetIcons=!1}},FitBounds:function(t){void 0===t&&(t=!0);var e=this.Cluster.ComputeGlobalBounds(t);e&&this._map.fitBounds(new L.LatLngBounds(new L.LatLng(e.minLat,e.maxLng),new L.LatLng(e.maxLat,e.minLng)))},GetMarkers:function(){return this.Cluster.GetMarkers()},RedrawIcons:function(t){void 0===t&&(t=!0),this._resetIcons=!0,t&&this.ProcessView()}}),s=(L.Layer?L.Layer:L.Class).extend({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_spiralCountTrigger:8,spiderfyDistanceMultiplier:1,initialize:function(t){this._cluster=t,this._currentMarkers=[],this._multiLines=!!L.multiPolyline,this._lines=this._multiLines?L.multiPolyline([],{weight:1.5,color:"#222"}):L.polyline([],{weight:1.5,color:"#222"})},onAdd:function(t){this._map=t,this._map.on("overlappingmarkers",this.Spiderfy,this),this._map.on("click",this.Unspiderfy,this),this._map.on("zoomend",this.Unspiderfy,this)},Spiderfy:function(t){var e=this;if(t.cluster===this._cluster){this.Unspiderfy();var r=t.markers.filter((function(t){return!t.filtered}));this._currentCenter=t.center;var n,i=this._map.latLngToLayerPoint(t.center);r.length>=this._spiralCountTrigger?n=this._generatePointsSpiral(r.length,i):(this._multiLines&&(i.y+=10),n=this._generatePointsCircle(r.length,i));for(var a=[],o=[],s=[],l=0,u=n.length;l<u;++l){var h=this._map.layerPointToLatLng(n[l]),p=this._cluster.BuildLeafletMarker(r[l],t.center);p.setZIndexOffset(5e3),p.setOpacity(0),this._currentMarkers.push(p),this._map.addLayer(p),o.push(p),s.push(h)}window.setTimeout((function(){for(l=0,u=n.length;l<u;++l)o[l].setLatLng(s[l]).setOpacity(1);var r=+new Date,i=window.setInterval((function(){a=[];var o=+new Date-r;if(o>=290)window.clearInterval(i),h=1;else var h=o/290;var p=t.center;for(l=0,u=n.length;l<u;++l){var c=s[l],f=c.lat-p.lat,g=c.lng-p.lng;a.push([p,new L.LatLng(p.lat+f*h,p.lng+g*h)])}e._lines.setLatLngs(a)}),42)}),1),this._lines.setLatLngs(a),this._map.addLayer(this._lines),t.marker&&(this._clusterMarker=t.marker.setOpacity(.3))}},_generatePointsCircle:function(t,e){var r,n,i=this.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,a=this._2PI/t,o=[];for(o.length=t,r=t-1;r>=0;r--)n=this._circleStartAngle+r*a,o[r]=new L.Point(Math.round(e.x+i*Math.cos(n)),Math.round(e.y+i*Math.sin(n)));return o},_generatePointsSpiral:function(t,e){var r,n=this.spiderfyDistanceMultiplier*this._spiralLengthStart,i=this.spiderfyDistanceMultiplier*this._spiralFootSeparation,a=this.spiderfyDistanceMultiplier*this._spiralLengthFactor,o=0,s=[];for(s.length=t,r=t-1;r>=0;r--)o+=i/n+5e-4*r,s[r]=new L.Point(Math.round(e.x+n*Math.cos(o)),Math.round(e.y+n*Math.sin(o))),n+=this._2PI*a/o;return s},Unspiderfy:function(){for(var t=this,e=0,r=this._currentMarkers.length;e<r;++e)this._currentMarkers[e].setLatLng(this._currentCenter).setOpacity(0);var n=this._currentMarkers;window.setTimeout((function(){for(e=0,r=n.length;e<r;++e)t._map.removeLayer(n[e])}),300),this._currentMarkers=[],this._map.removeLayer(this._lines),this._clusterMarker&&this._clusterMarker.setOpacity(1)},onRemove:function(t){this.Unspiderfy(),t.off("overlappingmarkers",this.Spiderfy,this),t.off("click",this.Unspiderfy,this),t.off("zoomend",this.Unspiderfy,this)}})}}]);