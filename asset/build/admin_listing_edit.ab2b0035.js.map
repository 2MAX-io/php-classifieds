{"version":3,"sources":["webpack://symfony/./assets/function/textarea-autosize.js","webpack://symfony/./assets/module/confirm.js","webpack://symfony/./assets/module/leaflet/leaflet_marker_icon.js","webpack://symfony/./assets/module/leaflet/map.js","webpack://symfony/./assets/public/listing_edit/listing-data.js","webpack://symfony/./assets/public/listing_edit/listing-edit-map.js","webpack://symfony/./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack://symfony/./node_modules/core-js/internals/not-a-regexp.js","webpack://symfony/./node_modules/core-js/internals/number-parse-float.js","webpack://symfony/./node_modules/core-js/internals/string-trim-forced.js","webpack://symfony/./node_modules/core-js/modules/es.array.find.js","webpack://symfony/./node_modules/core-js/modules/es.function.name.js","webpack://symfony/./node_modules/core-js/modules/es.parse-float.js","webpack://symfony/./node_modules/core-js/modules/es.string.starts-with.js","webpack://symfony/./node_modules/core-js/modules/es.string.trim.js"],"names":["$","autosize","$textarea","maxHeight","css","scrollHeight","additionalHeight","parseFloat","height","this","each","on","textareaAutosize","text","$button","confirm","data","startsWith","Translator","markerIcon","L","iconUrl","mapMarkerIcon","iconSize","iconAnchor","popupAnchor","shadowSize","shadowAnchor","Map","mapCenterLatLng","getDefaultMapCenterLatLng","mapZoom","dataForJs","ParamEnum","mapElement","leafletMap","map","tap","zoomControl","attributionControl","setView","control","zoom","zoomInTitle","zoomOutTitle","addTo","locate","position","drawMarker","drawCircle","returnToPrevBounds","locateOptions","maxZoom","icon","iconLoading","strings","title","metersUnit","feetUnit","popup","outsideMapBoundsMsg","onLocationError","alert","addControl","Control","Fullscreen","false","true","attribution","prefix","tileLayer","latLng","marker","haveLocationCoordinates","LatLng","latitude","longitude","listingData","$customFieldListWrapper","$packageListWrapper","loadFromBackend","listingId","categoryId","getCategoryFromSelect","category","request","Routing","response","html","restoreUserEnteredValues","find","$customFieldInput","previousValue","formValues","attr","value","trim","val","getFormValues","parents","serializeArray","forEach","el","name","parseInt","length","listingEditMap","currentLocationMarker","init","document","querySelector","displayMap","show","hide","createLeafletMap","onMapClick","addMarkerWithCurrentLocation","addMarker","event","latlng","updateFormWithLocationCoordinates","removeLayer","onMarkerClickRemoveMarker","getMapDefaultLatLng","$formLatitude","$formLongitude","lat","lng","MATCH","wellKnownSymbol","module","exports","METHOD_NAME","regexp","error1","error2","isRegExp","it","TypeError","global","whitespaces","$parseFloat","FORCED","Infinity","string","trimmedString","String","result","charAt","fails","$find","addToUnscopables","FIND","SKIPS_HOLES","Array","target","proto","forced","callbackfn","arguments","undefined","DESCRIPTORS","defineProperty","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error","parseFloatImplementation","descriptor","getOwnPropertyDescriptor","toLength","notARegExp","requireObjectCoercible","correctIsRegExpLogic","IS_PURE","nativeStartsWith","min","Math","CORRECT_IS_REGEXP_LOGIC","writable","searchString","that","index","search","slice","$trim","forcedStringTrimMethod"],"mappings":"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","file":"admin_listing_edit.ab2b0035.js","sourcesContent":["\"use strict\";\n\nimport $ from \"jquery\";\n\n$.fn.textareaAutosize = function () {\n    let autosize = function ($textarea) {\n        let maxHeight = $textarea.css(\"max-height\");\n        let scrollHeight = $textarea[0].scrollHeight;\n        if (scrollHeight >= maxHeight) {\n            return;\n        }\n        let additionalHeight = -(\n            parseFloat($textarea.css(\"padding-top\")) + parseFloat($textarea.css(\"padding-bottom\"))\n        );\n        $textarea.height(scrollHeight + additionalHeight);\n    };\n\n    return this.each(function () {\n        let $textarea = $(this);\n        $textarea.height($textarea.height());\n\n        autosize($textarea);\n\n        $textarea.on(\"input\", function () {\n            autosize($textarea);\n        });\n    });\n};\n\n$(\".js__textareaAutosize\").textareaAutosize();\n","\"use strict\";\n\nimport $ from \"jquery\";\nimport Translator from \"~/module/Translator\";\n\n$(\".js__confirm\").on(\"click\", function () {\n    let $button = $(this);\n    let translate = function (text) {\n        if (text.startsWith(\"trans.\")) {\n            return Translator.trans(text);\n        }\n\n        return text;\n    };\n\n    return confirm(translate($button.data(\"confirm-message\")));\n});\n","\"use strict\";\n\nimport L from \"leaflet\";\nimport mapMarkerIcon from \"~/img/map/map-marker-icon.svg\";\n\nlet markerIcon = L.icon({\n    iconUrl: mapMarkerIcon,\n    iconSize: [22, 22],\n    iconAnchor: [11, 11],\n    popupAnchor: [0, -4],\n    shadowSize: false,\n    shadowAnchor: false,\n});\n\nexport default markerIcon;\n","\"use strict\";\n\nimport \"~/module/leaflet/leaflet\";\nimport dataForJs from \"~/function/dataForJs\";\nimport ParamEnum from \"~/enum/ParamEnum\";\nimport Translator from \"~/module/Translator\";\nimport markerIcon from \"~/module/leaflet/leaflet_marker_icon\";\n\nexport default class Map {\n    mapElement;\n    leafletMap;\n    mapCenterLatLng;\n    mapZoom;\n\n    constructor() {\n        this.mapCenterLatLng = this.getDefaultMapCenterLatLng();\n        this.mapZoom = dataForJs[ParamEnum.MAP_DEFAULT_ZOOM];\n    }\n\n    createLeafletMap(mapElement) {\n        this.mapElement = mapElement;\n        this.leafletMap = L.map(this.mapElement, {\n            tap: false, // ref https://github.com/Leaflet/Leaflet/issues/7255\n            zoomControl: false,\n            attributionControl: false,\n        });\n        this.leafletMap.setView(this.mapCenterLatLng, this.mapZoom);\n\n        L.control\n            .zoom({\n                zoomInTitle: Translator.trans(\"trans.Zoom in\"),\n                zoomOutTitle: Translator.trans(\"trans.Zoom out\"),\n            })\n            .addTo(this.leafletMap);\n\n        // noinspection JSUnusedGlobalSymbols\n        L.control\n            .locate({\n                position: \"topright\",\n                drawMarker: false,\n                drawCircle: false,\n                returnToPrevBounds: true,\n                locateOptions: {\n                    maxZoom: 15,\n                },\n                icon: \"svg svg-location\",\n                iconLoading: \"svg svg-spinner svg-pulse\",\n                strings: {\n                    title: Translator.trans(\"trans.Show me where I am\"),\n                    metersUnit: Translator.trans(\"trans.meters\"),\n                    feetUnit: Translator.trans(\"trans.feet\"),\n                    popup: Translator.trans(\"trans.You are within {distance} {unit} from this point\"),\n                    outsideMapBoundsMsg: Translator.trans(\"trans.You seem located outside the boundaries of the map\"),\n                },\n                onLocationError: () => {\n                    alert(Translator.trans(\"trans.Your web browser denied access to geolocation\"));\n                },\n            })\n            .addTo(this.leafletMap);\n\n        this.leafletMap.addControl(\n            new L.Control.Fullscreen({\n                title: {\n                    false: Translator.trans(\"trans.View Fullscreen\"),\n                    true: Translator.trans(\"trans.Exit Fullscreen\"),\n                },\n            })\n        );\n\n        L.control.attribution({ prefix: false }).addTo(this.leafletMap);\n\n        L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        }).addTo(this.leafletMap);\n\n        // L.tileLayer(Routing.generate(\"app_map_image_cache\", {\n        //     z: 1,\n        //     x: 2,\n        //     y: 3,\n        // }).replace('1_2_3.png', '{z}_{x}_{y}.png'), {\n        //     attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        // }).addTo(this.leafletMap);\n\n        return this.leafletMap;\n    }\n\n    addMarker(latLng) {\n        let marker = new L.marker(latLng, { icon: markerIcon });\n        marker.addTo(this.leafletMap);\n\n        return marker;\n    }\n\n    getDefaultMapCenterLatLng() {\n        if (!this.haveLocationCoordinates()) {\n            return new L.LatLng(dataForJs[ParamEnum.MAP_DEFAULT_LATITUDE], dataForJs[ParamEnum.MAP_DEFAULT_LONGITUDE]);\n        }\n\n        let latitude = dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LATITUDE];\n        let longitude = dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LONGITUDE];\n\n        return new L.LatLng(latitude, longitude);\n    }\n\n    haveLocationCoordinates() {\n        return (\n            dataForJs[ParamEnum.MAP_LOCATION_COORDINATES] &&\n            dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LONGITUDE] !== null &&\n            dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LATITUDE] !== null\n        );\n    }\n}\n","\"use strict\";\n\nimport $ from \"jquery\";\nimport ParamEnum from \"~/enum/ParamEnum\";\nimport dataForJs from \"~/function/dataForJs\";\nimport Routing from \"~/module/Routing\";\n\nlet listingData = {};\nlistingData.category = null;\nlistingData.formValues = [];\nlistingData.$customFieldListWrapper = $(\".js__customFieldList\");\nlistingData.$packageListWrapper = $(\".js__packageList\");\n\nlistingData.loadFromBackend = function () {\n    let listingId = dataForJs[ParamEnum.LISTING_ID];\n    let categoryId = listingData.getCategoryFromSelect();\n    if (!categoryId) {\n        return;\n    }\n    listingData.category = categoryId;\n    let request = {};\n    request[ParamEnum.LISTING_ID] = listingId;\n    request[ParamEnum.CATEGORY_ID] = categoryId;\n    $.post(Routing.generate(\"app_listing_data\", request), function (response) {\n        listingData.$customFieldListWrapper.html(response[ParamEnum.CUSTOM_FIELD]);\n        listingData.$packageListWrapper.html(response[ParamEnum.PACKAGE_LIST]);\n        listingData.restoreUserEnteredValues();\n    });\n};\n\n/**\n * prevent loss of user entered custom field values when changing categories\n */\nlistingData.restoreUserEnteredValues = function () {\n    let $customFieldInputs = listingData.$customFieldListWrapper.find($('[name^=\"listing[customFieldList]\"]'));\n    $customFieldInputs.each(function () {\n        let $customFieldInput = $(this);\n        let previousValue = listingData.formValues[$customFieldInput.attr(\"name\")];\n        if (previousValue && previousValue.value.trim() !== \"\") {\n            $customFieldInput.val(previousValue.value);\n        }\n    });\n};\n\nlistingData.getFormValues = function () {\n    let formValues = [];\n    $(\".js__formCategory\")\n        .parents(\"form\")\n        .serializeArray()\n        .forEach(function (el) {\n            formValues[el.name] = el;\n        });\n\n    return formValues;\n};\n\n$(\".js__formCategory\").on(\"change\", function () {\n    if (listingData.category === listingData.getCategoryFromSelect()) {\n        return;\n    }\n\n    listingData.formValues = $.extend({}, listingData.formValues, listingData.getFormValues());\n    listingData.loadFromBackend();\n});\n\nlistingData.getCategoryFromSelect = function () {\n    return parseInt($(\".js__formCategory\").val()) || null;\n};\n\nlet customFieldsCount = listingData.$customFieldListWrapper.find($(\".form-group\")).length;\nif (customFieldsCount < 1) {\n    listingData.loadFromBackend();\n}\n","\"use strict\";\n\nimport $ from \"jquery\";\nimport ParamEnum from \"~/enum/ParamEnum\";\nimport dataForJs from \"~/function/dataForJs\";\nimport Map from \"~/module/leaflet/map\";\n\nlet listingEditMap = {};\n\nlistingEditMap = {\n    map: null,\n    leafletMap: null,\n    latLng: null,\n    currentLocationMarker: null,\n};\n\nlistingEditMap.init = function () {\n    let displayMapOnInit = document.querySelector(\".js__listingEditMapEnabled\");\n    if (displayMapOnInit) {\n        listingEditMap.displayMap();\n    }\n\n    $(\".js__addLocationToTheMapButton\").on(\"click\", function () {\n        listingEditMap.displayMap();\n    });\n};\n\nlistingEditMap.displayMap = function () {\n    $(\".js__listingEditLocationMap\").show();\n    $(\".js__addLocationToTheMapButton\").hide();\n\n    let mapElement = document.querySelector(\".js__listingEditLocationMap\");\n    listingEditMap.map = new Map();\n    listingEditMap.leafletMap = listingEditMap.map.createLeafletMap(mapElement);\n\n    listingEditMap.leafletMap.on(\"click\", listingEditMap.onMapClick);\n    listingEditMap.addMarkerWithCurrentLocation();\n};\n\nlistingEditMap.addMarkerWithCurrentLocation = function () {\n    if (!listingEditMap.haveLocationCoordinates()) {\n        return;\n    }\n\n    let latitude = dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LATITUDE];\n    let longitude = dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LONGITUDE];\n    listingEditMap.latLng = new L.LatLng(latitude, longitude);\n    listingEditMap.addMarker(listingEditMap.latLng);\n};\n\nlistingEditMap.onMapClick = function (event) {\n    listingEditMap.addMarker(event.latlng);\n    listingEditMap.updateFormWithLocationCoordinates(listingEditMap.latLng);\n};\n\nlistingEditMap.addMarker = function (latLng) {\n    if (listingEditMap.currentLocationMarker !== null) {\n        listingEditMap.leafletMap.removeLayer(listingEditMap.currentLocationMarker);\n        listingEditMap.currentLocationMarker = null;\n    }\n\n    // noinspection JSPotentiallyInvalidConstructorUsage\n    listingEditMap.currentLocationMarker = listingEditMap.map.addMarker(latLng);\n    listingEditMap.latLng = latLng;\n    listingEditMap.onMarkerClickRemoveMarker(listingEditMap.currentLocationMarker);\n};\n\nlistingEditMap.onMarkerClickRemoveMarker = function (marker) {\n    marker.on(\"click\", function () {\n        listingEditMap.leafletMap.removeLayer(marker);\n        listingEditMap.updateFormWithLocationCoordinates(null);\n    });\n};\n\nlistingEditMap.getMapDefaultLatLng = function () {\n    if (!listingEditMap.haveLocationCoordinates()) {\n        return new L.LatLng(dataForJs[ParamEnum.MAP_DEFAULT_LATITUDE], dataForJs[ParamEnum.MAP_DEFAULT_LONGITUDE]);\n    }\n\n    let latitude = dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LATITUDE];\n    let longitude = dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LONGITUDE];\n\n    return new L.LatLng(latitude, longitude);\n};\n\nlistingEditMap.haveLocationCoordinates = function () {\n    return (\n        dataForJs[ParamEnum.MAP_LOCATION_COORDINATES] &&\n        dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LONGITUDE] !== null &&\n        dataForJs[ParamEnum.MAP_LOCATION_COORDINATES][ParamEnum.LATITUDE] !== null\n    );\n};\n\nlistingEditMap.updateFormWithLocationCoordinates = function (latLng) {\n    let $formLatitude = $(\".js__locationLatitude\");\n    let $formLongitude = $(\".js__locationLongitude\");\n\n    if (latLng === null) {\n        $formLatitude.val(null);\n        $formLongitude.val(null);\n\n        return;\n    }\n\n    $formLatitude.val(latLng.lat);\n    $formLongitude.val(latLng.lng);\n};\n\nlistingEditMap.init();\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var global = require('../internals/global');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar $parseFloat = global.parseFloat;\nvar FORCED = 1 / $parseFloat(whitespaces + '-0') !== -Infinity;\n\n// `parseFloat` method\n// https://tc39.es/ecma262/#sec-parsefloat-string\nmodule.exports = FORCED ? function parseFloat(string) {\n  var trimmedString = trim(String(string));\n  var result = $parseFloat(trimmedString);\n  return result === 0 && trimmedString.charAt(0) == '-' ? -0 : result;\n} : $parseFloat;\n","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var $ = require('../internals/export');\nvar parseFloatImplementation = require('../internals/number-parse-float');\n\n// `parseFloat` method\n// https://tc39.es/ecma262/#sec-parsefloat-string\n$({ global: true, forced: parseFloat != parseFloatImplementation }, {\n  parseFloat: parseFloatImplementation\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\nvar nativeStartsWith = ''.startsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.es/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return nativeStartsWith\n      ? nativeStartsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n"],"sourceRoot":""}