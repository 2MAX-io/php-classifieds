{"version":3,"file":"listing_contact_data.99ea3ade.js","mappings":"0IAEA,IAGQA,EAHJC,EAAY,KAYM,OAAdA,IATAD,EAAmBE,SAASC,eAAe,iBAU3CF,EATA,OAASD,EACF,GAGJI,KAAKC,MAAMC,KAAKN,EAAiBO,SAW5CN,EAHWA,G,qHCbPO,G,SAAkB,SAACC,GACnB,IAAIC,EAAY,CAChBA,WAAuB,YACvBA,+BAA2C,6BAC3CA,kBAA8B,kBAC9BA,WAAuB,aAEnBC,EAAW,IAAIC,SACnBD,EAASE,OAAOH,EAAUI,WAAYL,EAAmBM,aAAa,oBACtEJ,EAASE,OAAOH,EAAUM,+BAAgCf,EAAAA,GAAUS,EAAUM,iCAE9EC,MAAMR,EAAmBM,aAAa,cAAe,CACjDG,OAAQ,OACRC,KAAMR,EACNS,QAAS,CACL,eAAgBnB,EAAAA,GAAUS,EAAUW,eAGvCC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACG,GAAa,OACZ,IAASA,EAASC,UAItB,UAAAxB,SAASyB,cAAc,kCAAvB,SAAmDC,SAEnDnB,EAAmBoB,mBAAmB,cAAeJ,EAASf,EAAUoB,oBACxErB,EAAmBsB,MAAMC,QAAU,WAEtCC,OAAM,SAACC,GAGJ,MAFAhC,SAASiC,iBAAiB,2BAA2BC,SAAQ,SAACC,GAAD,OAAaA,EAAQT,YAClFnB,EAAmBsB,MAAMC,QAAU,QAC7BE,OAIdI,EAAU,SAAUC,GACpBA,EAAMC,iBACN,IAAI/B,EAAqBgC,KACG,mBAAjBC,OAAOzB,MAOlBT,EAAgBC,GANZ,gCAAuBa,MAAK,SAACqB,GACzBD,OAAOzB,MAAQ0B,EAAO1B,MACtBT,EAAgBC,OAO5B,UAAAP,SAASyB,cAAc,yCAAvB,SAA0DiB,iBAAiB,QAASN,GACpF,UAAApC,SAASyB,cAAc,yCAAvB,SAA0DiB,iBAAiB,aAAcN,GACzFpC,SAAS0C,iBAAiB,SAAS,SAACC,GAC5BA,EAAEC,OAAOC,QAAQ,oBACjBC,SAASC,a,iBC1DM,oBAAZC,UACFA,QAAQC,UAAUC,UACnBF,QAAQC,UAAUC,QAAUF,QAAQC,UAAUE,mBAAqBH,QAAQC,UAAUG,uBAGpFJ,QAAQC,UAAUJ,UACnBG,QAAQC,UAAUJ,QAAU,SAAUQ,GAClC,IAAIC,EAAKf,KAET,EAAG,CACC,GAAIe,EAAGJ,QAAQG,GAAI,OAAOC,EAC1BA,EAAKA,EAAGC,eAAiBD,EAAGE,iBAChB,OAAPF,GAA+B,IAAhBA,EAAGG,UAE3B,OAAO,U","sources":["webpack://symfony/./assets/function/dataForJs.js","webpack://symfony/./assets/public/listing_contact_data.js","webpack://symfony/./node_modules/element-closest-polyfill/index.js"],"sourcesContent":["\"use strict\";\n\nlet dataForJs = null;\n\nlet getDataForJsNoCache = function () {\n    let dataForJsElement = document.getElementById(\"js__dataForJs\");\n    if (null === dataForJsElement) {\n        return {};\n    }\n\n    return JSON.parse(atob(dataForJsElement.value));\n};\n\nlet getDataForJs = function () {\n    if (dataForJs === null) {\n        dataForJs = getDataForJsNoCache();\n    }\n\n    return dataForJs;\n};\n\ndataForJs = getDataForJs();\n\nexport { dataForJs as default, getDataForJs, getDataForJsNoCache };\n","\"use strict\";\n\nimport dataForJs from \"~/function/dataForJs\";\nimport \"element-closest-polyfill\";\n\nlet loadContactData = ($contactDataButton) => {\n    let ParamEnum = {};\n    ParamEnum.LISTING_ID = \"listingId\";\n    ParamEnum.SHOW_LISTING_PREVIEW_FOR_OWNER = \"showListingPreviewForOwner\";\n    ParamEnum.SHOW_CONTACT_HTML = \"showContactHtml\";\n    ParamEnum.CSRF_TOKEN = \"csrfToken\";\n\n    var formData = new FormData();\n    formData.append(ParamEnum.LISTING_ID, $contactDataButton.getAttribute(\"data-listing-id\"));\n    formData.append(ParamEnum.SHOW_LISTING_PREVIEW_FOR_OWNER, dataForJs[ParamEnum.SHOW_LISTING_PREVIEW_FOR_OWNER]);\n\n    fetch($contactDataButton.getAttribute(\"data-route\"), {\n        method: \"post\",\n        body: formData,\n        headers: {\n            \"X-CSRF-Token\": dataForJs[ParamEnum.CSRF_TOKEN],\n        },\n    })\n        .then((response) => response.json())\n        .then((jsonData) => {\n            if (true !== jsonData.success) {\n                return;\n            }\n\n            document.querySelector(\".js__listingContactData\")?.remove();\n\n            $contactDataButton.insertAdjacentHTML(\"beforebegin\", jsonData[ParamEnum.SHOW_CONTACT_HTML]);\n            $contactDataButton.style.display = \"none\";\n        })\n        .catch((err) => {\n            document.querySelectorAll(\".js__listingContactData\").forEach((element) => element.remove());\n            $contactDataButton.style.display = \"block\";\n            throw err;\n        });\n};\n\nlet onClick = function (event) {\n    event.preventDefault();\n    let $contactDataButton = this;\n    if (typeof window.fetch !== \"function\") {\n        import(\"whatwg-fetch\").then((module) => {\n            window.fetch = module.fetch;\n            loadContactData($contactDataButton);\n        });\n        return;\n    }\n    loadContactData($contactDataButton);\n};\n\ndocument.querySelector(\".js__listingShowContactDetails\")?.addEventListener(\"click\", onClick);\ndocument.querySelector(\".js__listingShowContactDetails\")?.addEventListener(\"touchstart\", onClick);\ndocument.addEventListener(\"click\", (e) => {\n    if (e.target.closest(\".js__reloadPage\")) {\n        location.reload();\n    }\n});\n","if (typeof Element !== \"undefined\") {\n    if (!Element.prototype.matches) {\n        Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    if (!Element.prototype.closest) {\n        Element.prototype.closest = function (s) {\n            var el = this;\n\n            do {\n                if (el.matches(s)) return el;\n                el = el.parentElement || el.parentNode;\n            } while (el !== null && el.nodeType === 1);\n            \n            return null;\n        };\n    }\n}\n"],"names":["dataForJsElement","dataForJs","document","getElementById","JSON","parse","atob","value","loadContactData","$contactDataButton","ParamEnum","formData","FormData","append","LISTING_ID","getAttribute","SHOW_LISTING_PREVIEW_FOR_OWNER","fetch","method","body","headers","CSRF_TOKEN","then","response","json","jsonData","success","querySelector","remove","insertAdjacentHTML","SHOW_CONTACT_HTML","style","display","catch","err","querySelectorAll","forEach","element","onClick","event","preventDefault","this","window","module","addEventListener","e","target","closest","location","reload","Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","s","el","parentElement","parentNode","nodeType"],"sourceRoot":""}