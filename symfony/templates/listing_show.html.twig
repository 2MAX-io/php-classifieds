{% extends 'base.html.twig' %}

{% block body %}

    <div class="container mt-3 mb-3">
        <a href="//www.jaslo4u.pl">Jaslo4u.pl</a>
        > <a href="{{ path('app_index') }}">{{ 'trans.Classifieds' | trans }}</a>

        {% for category in categoryBreadcrumbs %}
            &gt; <a href="{{ path('app_category', {"categoryId": category.id}) }}">{{ category.name }}</a>
        {% endfor %}

        > {{ listing.title }}
    </div>

    <div class="container mt-3">
        <div class="row">
            <div class="col-md-9">
                <div class="row mb-3">
                    <div class="col-sm-10">
                        <h1>{{ listing.title }}</h1>
                    </div>
                </div>

                <img class="rounded" alt="{{ listing.title }}" src="{{ asset(listing.listingFiles.first.path | default('asset/img/blank.png')) }}">

                <!-- Tabs nav -->
                <ul class="nav nav-tabs flex-column flex-sm-row" id="myTab" role="tablist">
                    <li class="nav-item flex-sm-fill text-sm-center mr-1">
                        <a href="#overview" class="nav-link active" aria-controls="overview" role="tab" data-toggle="tab" aria-selected="true">{{ 'trans.Ad Details' | trans }}</a>
                    </li>

                    {% if listing.listingFiles.count > 0 %}
                        <li class="nav-item flex-sm-fill text-sm-center mr-1">
                            <a href="#photos" class="nav-link" aria-controls="photos" role="tab" data-toggle="tab">{{ 'trans.Photos' | trans }} ({{ listing.listingFiles.count }})</a>
                        </li>
                    {% endif %}
                </ul>

                <!-- Tabs contents -->
                <div class="tab-content p-3 rounded-bottom">
                    <!-- tab overview -->
                    <div class="tab-pane fade show active" role="tabpanel" id="overview">

                        <div class="row">
                            {% for listingCustomFieldValue in listing.listingCustomFieldValues %}
                                {# @var listingCustomFieldValue \App\Entity\ListingCustomFieldValue #}
                                <div class="mb-2 py-2 col-md-4">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <strong>{{ listingCustomFieldValue.customField.name }}:&nbsp;</strong>
                                            {% if listingCustomFieldValue.customFieldOption is empty %}
                                                <span>{{ listingCustomFieldValue.value }}</span>
                                            {% else %}
                                                <span>{{ listingCustomFieldValue.customFieldOption.name }}</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>

                        <div class="zebra">
                            <!-- description -->
                            <div class="block">
                                <div class="description px-3 mb-2 py-2">
                                    {{ listing.description | nl2br }}
                                </div>
                                <div class="description px-3 mb-2 py-2 clearfix">
                                    <div class="float-md-right">
                                        {{ 'trans.Views' | trans }}: {{ listingShowDto.viewsCount }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- end div class zebra -->
                    </div>
                    <!-- end tab overview -->

                    <!-- Tab photos -->
                    <div id="photos" class="tab-pane fade clearfix" role="tabpanel">
                        <div class="listing-thumb float-left img-thumbnail mr-2 mb-2" style="width: 120px">

                            {% for listingFile in listing.listingFiles %}
                                <a href="{{ asset(listingFile.path) }}" data-toggle="lightbox" data-gallery="multiimages" data-title="{{ listing.title }}">
                                    <div class="dummy container-img rounded" style="background-image:url('{{ asset(listingFile.path) }}');"></div>
                                </a>
                            {% endfor %}
                        </div>
                    </div>
                    <!-- End tab photos -->
                </div>

                {% for listingFile in listing.listingFiles %}
                    <a href="{{ asset(listingFile.path) }}" data-toggle="lightbox" data-gallery="multiimages" data-title="{{ listing.title }}">
                        <img src="{{ asset(listingFile.path) }}" alt="{{ listing.title }}" />
                    </a>
                {% endfor %}

                <!-- end tabs contents -->
            </div>

            <!-- Sidebar -->
            <div class="col-md-3">

                {% if listing.price is not empty %}
                    <div>
                        <div class="my-1">
                            <h3 class="btn btn-dark price btn-lg">{{ 'trans.Price' | trans }}: {{ listing.price }}</h3>
                        </div>
                    </div>
                {% endif %}

                {# Informations #}
                <div class="card mb-3" style="width: 100%;">
                    <div class="card-header">
                        <h5>{{ 'trans.Informations' | trans }}</h5>
                    </div>

                    <div class="card-body">
                        {% if listing.phone is not empty %}
                        <div class="mb-2 py-2">
                            <div class="row">
                                <div class="col-sm-6">{{ 'trans.Phone' | trans }}</div>

                                <div class="col-sm-6">
                                    <a href="tel:{{ listing.phone }}">{{ listing.phone }}</a>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        {% if listing.email is not empty %}
                        <div class="mb-2 py-2">
                            <div class="row">
                                <div class="col-sm-6">{{ 'trans.Email' | trans }}</div>

                                <div class="col-sm-6">
                                    <a target="_blank" href="mailto:{{ listing.email }}">{{ listing.email }}</a>
                                </div>
                            </div>
                        </div>
                        {% endif %}

                        <div>
                            <a href="{{ path('app_user_listings', {"user": listing.user.id}) }}">
                                {{ 'trans.User other listings' | trans }}
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Share listing -->
                <div class="card mb-3" style="width: 100%;">
                    <div class="card-header">
                        <h5>{{ 'trans.Share This Listing' | trans }}</h5>
                    </div>

                    <div class="card-body">
                        <div class="fb-share-button"
                             data-href="https://x-php.pro/demo/classifiedsplus/listing/california/los-angeles-104/auto-accessories/liquidation-wholesale-pricing-for-led-he"
                             data-layout="button"
                             data-size="small"
                             data-mobile-iframe="true"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fx-php.pro%2Fdemo%2Fclassifiedsplus%2Flisting%2Fcalifornia%2Flos-angeles-104%2Fauto-accessories%2Fliquidation-wholesale-pricing-for-led-he&src=sdkpreparse" class="fb-xfbml-parse-ignore">Share</a>
                        </div>

                        <a class="twitter-share-button" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fx-php.pro%2Fdemo%2Fclassifiedsplus%2Flisting%2Fcalifornia%2Flos-angeles-104%2Fauto-accessories%2Fliquidation-wholesale-pricing-for-led-he&text=Liquidation%21+Wholesale+Pricing+for+LED+Headlight+%2F+Fog+Conversion+Kits">Tweet</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock body %}

{% block js %}
    <link rel="stylesheet" href="{{ asset('asset/lib/lightbox-master/dist/ekko-lightbox.css') }}">
    <script src="{{ asset('asset/lib/lightbox-master/dist/ekko-lightbox.min.js') }}"></script>

    <script>
        $(document).ready(function(){
            // lightbox
            $(document).delegate('*[data-toggle="lightbox"]', 'click', function(event) {
                event.preventDefault();
                $(this).ekkoLightbox();
            });
        });
    </script>

{% endblock %}

